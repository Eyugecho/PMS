import{_ as W,aA as De,aB as Ne,W as H,r as x,L as _e,j as e,N as $e,aC as Re,X as Ie,H as Ue,E as Me,s as Pe,m as J,K as Be,t as fe,v as ve,n as m,u as re,B as E,G as y,ay as O,aD as w,T as L,a3 as B,aE as ye,h as $,I as te,ag as ne,Q as Ce,F as xe,e as me,S as je,R as ze}from"./index-CsFgNO3o.js";import{d as se,S as We,T as Oe,a as Z}from"./MoreVert-BXrYe9K9.js";import{c as S}from"./config-By_uygwP.js";import{T as ae}from"./TableContainer-qijX9D2r.js";import{T as ie,a as oe,b as z,c as le}from"./TableRow-CVrgL676.js";import{T as j}from"./TableCell-F9dx6MLR.js";import{M as P}from"./MenuItem-BvD3M8VG.js";import{D as ce,a as de,b as ue,c as he}from"./DialogTitle-D1Q0RY_x.js";import{A as we}from"./Alert-C9wR4zH8.js";import"./KeyboardArrowRight-BXcaHgBy.js";import"./Close-Caj59dBO.js";const Le=["className","component","disableGutters","fixed","maxWidth","classes"],Ve=De(),Ye=Ne("div",{name:"MuiContainer",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:a}=r;return[n.root,n[`maxWidth${H(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),Ge=r=>Re({props:r,name:"MuiContainer",defaultTheme:Ve}),He=(r,n)=>{const a=U=>Ue(n,U),{classes:C,fixed:k,disableGutters:I,maxWidth:u}=r,g={root:["root",u&&`maxWidth${H(String(u))}`,k&&"fixed",I&&"disableGutters"]};return Ie(g,a,C)};function Je(r={}){const{createStyledComponent:n=Ye,useThemeProps:a=Ge,componentName:C="MuiContainer"}=r,k=n(({theme:u,ownerState:g})=>W({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!g.disableGutters&&{paddingLeft:u.spacing(2),paddingRight:u.spacing(2),[u.breakpoints.up("sm")]:{paddingLeft:u.spacing(3),paddingRight:u.spacing(3)}}),({theme:u,ownerState:g})=>g.fixed&&Object.keys(u.breakpoints.values).reduce((U,v)=>{const T=v,t=u.breakpoints.values[T];return t!==0&&(U[u.breakpoints.up(T)]={maxWidth:`${t}${u.breakpoints.unit}`}),U},{}),({theme:u,ownerState:g})=>W({},g.maxWidth==="xs"&&{[u.breakpoints.up("xs")]:{maxWidth:Math.max(u.breakpoints.values.xs,444)}},g.maxWidth&&g.maxWidth!=="xs"&&{[u.breakpoints.up(g.maxWidth)]:{maxWidth:`${u.breakpoints.values[g.maxWidth]}${u.breakpoints.unit}`}}));return x.forwardRef(function(g,U){const v=a(g),{className:T,component:t="div",disableGutters:M=!1,fixed:R=!1,maxWidth:c="lg"}=v,i=_e(v,Le),N=W({},v,{component:t,disableGutters:M,fixed:R,maxWidth:c}),F=He(N,C);return e.jsx(k,W({as:t,ownerState:N,className:$e(F.root,T),ref:U},i))})}function Ke(r){return Ue("MuiAppBar",r)}Me("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Qe=["className","color","enableColorOnDark","position"],Xe=r=>{const{color:n,position:a,classes:C}=r,k={root:["root",`color${H(n)}`,`position${H(a)}`]};return Ie(k,Ke,C)},ge=(r,n)=>r?`${r==null?void 0:r.replace(")","")}, ${n})`:n,Ze=Pe(J,{name:"MuiAppBar",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:a}=r;return[n.root,n[`position${H(a.position)}`],n[`color${H(a.color)}`]]}})(({theme:r,ownerState:n})=>{const a=r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[900];return W({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},n.position==="fixed"&&{position:"fixed",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},n.position==="absolute"&&{position:"absolute",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0},n.position==="sticky"&&{position:"sticky",zIndex:(r.vars||r).zIndex.appBar,top:0,left:"auto",right:0},n.position==="static"&&{position:"static"},n.position==="relative"&&{position:"relative"},!r.vars&&W({},n.color==="default"&&{backgroundColor:a,color:r.palette.getContrastText(a)},n.color&&n.color!=="default"&&n.color!=="inherit"&&n.color!=="transparent"&&{backgroundColor:r.palette[n.color].main,color:r.palette[n.color].contrastText},n.color==="inherit"&&{color:"inherit"},r.palette.mode==="dark"&&!n.enableColorOnDark&&{backgroundColor:null,color:null},n.color==="transparent"&&W({backgroundColor:"transparent",color:"inherit"},r.palette.mode==="dark"&&{backgroundImage:"none"})),r.vars&&W({},n.color==="default"&&{"--AppBar-background":n.enableColorOnDark?r.vars.palette.AppBar.defaultBg:ge(r.vars.palette.AppBar.darkBg,r.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?r.vars.palette.text.primary:ge(r.vars.palette.AppBar.darkColor,r.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?r.vars.palette[n.color].main:ge(r.vars.palette.AppBar.darkBg,r.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?r.vars.palette[n.color].contrastText:ge(r.vars.palette.AppBar.darkColor,r.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:n.color==="inherit"?"inherit":"var(--AppBar-color)"},n.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),er=x.forwardRef(function(n,a){const C=Be({props:n,name:"MuiAppBar"}),{className:k,color:I="primary",enableColorOnDark:u=!1,position:g="fixed"}=C,U=_e(C,Qe),v=W({},C,{color:I,position:g,enableColorOnDark:u}),T=Xe(v);return e.jsx(Ze,W({square:!0,component:"header",ownerState:v,elevation:4,className:$e(T.root,k,g==="fixed"&&"mui-fixed"),ref:a},U))}),rr=Je({createStyledComponent:Pe("div",{name:"MuiContainer",slot:"Root",overridesResolver:(r,n)=>{const{ownerState:a}=r;return[n.root,n[`maxWidth${H(String(a.maxWidth))}`],a.fixed&&n.fixed,a.disableGutters&&n.disableGutters]}}),useThemeProps:r=>Be({props:r,name:"MuiContainer"})});var ke={},tr=ve;Object.defineProperty(ke,"__esModule",{value:!0});var K=ke.default=void 0,nr=tr(fe()),sr=e;K=ke.default=(0,nr.default)((0,sr.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Se={},ar=ve;Object.defineProperty(Se,"__esModule",{value:!0});var Q=Se.default=void 0,ir=ar(fe()),or=e;Q=Se.default=(0,ir.default)((0,or.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var Te={},lr=ve;Object.defineProperty(Te,"__esModule",{value:!0});var pe=Te.default=void 0,cr=lr(fe()),dr=e;pe=Te.default=(0,cr.default)((0,dr.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline");var Ee={},ur=ve;Object.defineProperty(Ee,"__esModule",{value:!0});var X=Ee.default=void 0,hr=ur(fe()),be=e;X=Ee.default=(0,hr.default)([(0,be.jsx)("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),(0,be.jsx)("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),(0,be.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-3.5c.73 0 1.39.19 1.97.53.12-.14.86-.98 1.01-1.14-.85-.56-1.87-.89-2.98-.89-1.11 0-2.13.33-2.99.88.97 1.09.01.02 1.01 1.14.59-.33 1.25-.52 1.98-.52"},"2")],"SentimentDissatisfied");function pr(){const[r,n]=x.useState([]),[a,C]=x.useState(null),[k,I]=x.useState(!1),[u,g]=x.useState(null),[U,v]=x.useState(null);x.useEffect(()=>{T()},[]);const T=async()=>{try{const s=localStorage.getItem("token"),l=await(await fetch(`${S.API_URL_Units}/measuring-units`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).json();l.success?n(l.data.data):(console.error("Failed to fetch measuring units:",l.message),m.error(`Failed to fetch measuring units: ${l.message}`))}catch(s){console.error("Error fetching measuring units:",s),m.error(`Error fetching measuring units: ${s.message}`)}},t=async s=>{const p=a!==null?"PATCH":"POST",l=a!==null?`${S.API_URL_Units}/measuring-units/${r[a].id}`:`${S.API_URL_Units}/measuring-units`;try{const _=localStorage.getItem("token"),h=await(await fetch(l,{method:p,headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({name:s.measuringUnit,description:s.measuringType})})).json();h.success?(T(),d(),m.success("Measuring unit saved successfully!")):(console.error("Failed to save measuring unit:",h.message),m.error(`Error saving measuring unit: ${h.message}`))}catch(_){console.error("Error saving measuring unit:",_),m.error(`Error saving measuring unit: ${_.message}`)}},M=s=>{c.setFieldValue("measuringUnit",r[s].name),c.setFieldValue("measuringType",r[s].description),C(s),F()},R=async s=>{try{const p=localStorage.getItem("token"),l=await fetch(`${S.API_URL_Units}/measuring-units/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(l.status===204)n(_=>_.filter(o=>o.id!==s)),m.success("Measuring unit deleted successfully!");else{const _=await l.json();_.success?(n(o=>o.filter(h=>h.id!==s)),m.success("Measuring unit deleted successfully!")):(m.error(`Failed to delete measuring unit: ${_.message}`),console.error("Failed to delete measuring unit:",_.message))}}catch(p){m.error(`Error deleting measuring unit: ${p.message}`),console.error("Error deleting measuring unit:",p)}},c=re({initialValues:{measuringUnit:"",measuringType:""},onSubmit:(s,{resetForm:p})=>{t(s),p()}}),i=(s,p)=>{g(s.currentTarget),v(p)},N=()=>{g(null),v(null)},F=()=>{I(!0)},d=()=>{I(!1),c.resetForm(),C(null)};return e.jsxs(E,{p:3,children:[e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsxs(w,{children:[e.jsx(L,{variant:"h6",gutterBottom:!0,children:"Create New Measuring Unit"}),e.jsxs(E,{component:"form",onSubmit:c.handleSubmit,children:[e.jsx(B,{fullWidth:!0,id:"measuringUnit",name:"measuringUnit",label:"Measuring Unit",value:c.values.measuringUnit,onChange:c.handleChange,error:c.touched.measuringUnit&&!!c.errors.measuringUnit,helperText:c.touched.measuringUnit&&c.errors.measuringUnit,margin:"normal"}),e.jsx(B,{fullWidth:!0,id:"measuringType",name:"measuringType",label:"Type (e.g., Numerical, Percentage)",value:c.values.measuringType,onChange:c.handleChange,error:c.touched.measuringType&&!!c.errors.measuringType,helperText:c.touched.measuringType&&c.errors.measuringType,margin:"normal"}),e.jsxs(ye,{children:[e.jsx($,{variant:"contained",color:"primary",type:"submit",startIcon:e.jsx(pe,{}),children:"Save"}),e.jsx($,{variant:"outlined",color:"secondary",onClick:c.handleReset,children:"Clear"})]})]})]})})}),e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsx(w,{children:r.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(X,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No measuring units entered yet."})]}):e.jsx(ae,{component:J,variant:"outlined",style:{border:"1px solid #ddd"},children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Measuring Unit"}),e.jsx(j,{children:"Description"}),e.jsx(j,{align:"right",children:"Actions"})]})}),e.jsx(le,{children:r.map((s,p)=>e.jsxs(z,{children:[e.jsx(j,{component:"th",scope:"row",children:s.name}),e.jsx(j,{children:s.description}),e.jsxs(j,{align:"right",children:[e.jsx(te,{color:"primary",onClick:l=>i(l,p),children:e.jsx(se,{})}),e.jsxs(ne,{anchorEl:u,open:!!u&&U===p,onClose:N,children:[e.jsxs(P,{onClick:()=>{M(p),N()},children:[e.jsx(K,{fontSize:"small"})," Edit"]}),e.jsxs(P,{onClick:()=>{R(s.id),N()},children:[e.jsx(Q,{fontSize:"small"})," Delete"]})]})]})]},s.id))})]})})})})})]}),e.jsxs(ce,{open:k,onClose:d,children:[e.jsx(de,{children:a!==null?"Edit Measuring Unit":"Add New Measuring Unit"}),e.jsx(ue,{children:e.jsxs(E,{component:"form",onSubmit:c.handleSubmit,children:[e.jsx(B,{fullWidth:!0,id:"measuringUnit",name:"measuringUnit",label:"Measuring Unit",value:c.values.measuringUnit,onChange:c.handleChange,error:c.touched.measuringUnit&&!!c.errors.measuringUnit,helperText:c.touched.measuringUnit&&c.errors.measuringUnit,margin:"normal"}),e.jsx(B,{fullWidth:!0,id:"measuringType",name:"measuringType",label:"Type (e.g., Numerical, Percentage)",value:c.values.measuringType,onChange:c.handleChange,error:c.touched.measuringType&&!!c.errors.measuringType,helperText:c.touched.measuringType&&c.errors.measuringType,margin:"normal"}),e.jsxs(he,{children:[e.jsx($,{onClick:d,color:"primary",children:"Cancel"}),e.jsx($,{type:"submit",color:"primary",children:"Save"})]})]})})]}),e.jsx(Ce,{})]})}function xr(){const[r,n]=x.useState([]),[a,C]=x.useState(null),[k,I]=x.useState(!1),[u,g]=x.useState(!1),[U,v]=x.useState(""),[T,t]=x.useState("success"),[M,R]=x.useState(null),[c,i]=x.useState(null);x.useEffect(()=>{N()},[]);const N=async()=>{try{const f=localStorage.getItem("token"),D=await(await fetch(`${S.API_URL_Units}/perspective-types`,{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}})).json();D.success?n(D.data.data):console.error("Failed to fetch perceptives:",D.message)}catch(f){console.error("Error fetching perceptives:",f)}},F=async f=>{try{const b=localStorage.getItem("token");if(!b)throw new Error("No token found");const D=a!==null?"PATCH":"POST",Y=a!==null?`${S.API_URL_Units}/perspective-types/${r[a].id}`:`${S.API_URL_Units}/perspective-types`,V=await fetch(Y,{method:D,headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json",Accept:"application/json, text/plain, */*"},body:JSON.stringify({name:f.perspectiveName})}),G=await V.json();V.ok?G.success?(n(Ae=>a!==null?Ae.map((Fe,qe)=>qe===a?G.data:Fe):[...Ae,G.data]),o(),v("Perspective saved successfully!"),t("success")):(console.error("Error creating/updating perspective:",G.message),v("Error creating/updating perspective: "+G.message),t("error")):(v("Perspective already exists"),t("warning")),g(!0)}catch(b){console.error("Error creating/updating perspective:",b),v("Error creating/updating perspective: "+b.message),t("error"),g(!0)}},d=async f=>{await F(f)},s=f=>{l.setFieldValue("perspectiveName",r[f].name),C(f),_(),q()},p=async f=>{try{const b=localStorage.getItem("token"),D=await fetch(`${S.API_URL_Units}/perspective-types/${f}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(D.status===204)n(Y=>Y.filter(V=>V.id!==f)),v("Perspective deleted successfully!"),t("success");else{const Y=await D.json();Y.success?(n(V=>V.filter(G=>G.id!==f)),v("Perspective deleted successfully!"),t("success")):(v("Failed to delete perspective: "+Y.message),t("error"),console.error("Failed to delete perspective:",Y.message))}}catch(b){v("Error deleting perspective: "+b.message),t("error"),console.error("Error deleting perspective:",b)}g(!0),q()},l=re({initialValues:{perspectiveName:""},onSubmit:(f,{resetForm:b})=>{a!==null?d(f):F(f),b()}}),_=()=>{I(!0)},o=()=>{I(!1),l.resetForm(),C(null)},h=(f,b)=>{R(f.currentTarget),i(b)},q=()=>{R(null),i(null)},A=()=>{g(!1)};return e.jsxs(E,{p:3,children:[e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsxs(w,{children:[e.jsx(L,{variant:"h6",gutterBottom:!0,children:"Create New Perspective"}),e.jsxs(E,{component:"form",onSubmit:l.handleSubmit,children:[e.jsx(B,{fullWidth:!0,id:"perspectiveName",name:"perspectiveName",label:"Perspective",value:l.values.perspectiveName,onChange:l.handleChange,error:l.touched.perspectiveName&&!!l.errors.perspectiveName,helperText:l.touched.perspectiveName&&l.errors.perspectiveName,margin:"normal"}),e.jsxs(ye,{children:[e.jsx($,{variant:"contained",color:"primary",type:"submit",startIcon:e.jsx(pe,{}),children:"Save"}),e.jsx($,{variant:"outlined",color:"secondary",onClick:l.handleReset,children:"Clear"})]})]})]})})}),e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsx(w,{children:r.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(X,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No perspectives entered yet."})]}):e.jsx(ae,{component:J,variant:"outlined",style:{border:"1px solid #ddd"},children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Perspective"}),e.jsx(j,{align:"right",children:"Actions"})]})}),e.jsx(le,{children:r.map((f,b)=>e.jsxs(z,{children:[e.jsx(j,{component:"th",scope:"row",children:f.name}),e.jsxs(j,{align:"right",children:[e.jsx(te,{color:"primary",onClick:D=>h(D,b),children:e.jsx(se,{})}),e.jsxs(ne,{anchorEl:M,open:!!M&&c===b,onClose:q,children:[e.jsxs(P,{onClick:()=>s(b),children:[e.jsx(K,{fontSize:"small"})," Edit"]}),e.jsxs(P,{onClick:()=>p(f.id),children:[e.jsx(Q,{fontSize:"small"})," Delete"]})]})]})]},f.id))})]})})})})})]}),e.jsxs(ce,{open:k,onClose:o,children:[e.jsx(de,{children:"Edit Perspective"}),e.jsx(ue,{children:e.jsx(B,{autoFocus:!0,margin:"dense",id:"perspectiveName",name:"perspectiveName",label:"Perspective Name",type:"text",fullWidth:!0,value:l.values.perspectiveName,onChange:l.handleChange,error:l.touched.perspectiveName&&!!l.errors.perspectiveName,helperText:l.touched.perspectiveName&&l.errors.perspectiveName})}),e.jsxs(he,{children:[e.jsx($,{onClick:o,color:"primary",children:"Cancel"}),e.jsx($,{onClick:l.handleSubmit,color:"primary",children:"Update"})]})]}),e.jsx(We,{open:u,autoHideDuration:6e3,onClose:A,children:e.jsx(we,{onClose:A,severity:T,sx:{width:"100%"},children:U})})]})}function mr(){const[r,n]=x.useState([]),[a,C]=x.useState(null),[k,I]=x.useState(!1),[u,g]=x.useState(null),[U,v]=x.useState(null);x.useEffect(()=>{T()},[]);const T=async()=>{try{const d=localStorage.getItem("token"),p=await(await fetch(`${S.API_URL_Units}/evaluation-types`,{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();p.success?n(p.data.data):m.error("Failed to fetch evaluation types")}catch{m.error("Error occurred while fetching evaluation types")}},t=re({initialValues:{name:"",description:""},onSubmit:async(d,{resetForm:s})=>{try{const p=a!==null?"PATCH":"POST",l=a!==null?`${S.API_URL_Units}/evaluation-types/${r[a].id}`:`${S.API_URL_Units}/evaluation-types`,_=localStorage.getItem("token"),h=await(await fetch(l,{method:p,headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify(d)})).json();h.success?(m.success(a!==null?"Evaluation type updated":"Evaluation type created"),T(),F()):m.error(h.message||"Failed to save evaluation type")}catch{m.error("Error occurred while saving evaluation type")}s()}}),M=d=>{t.setFieldValue("name",r[d].name),t.setFieldValue("description",r[d].description||""),C(d),N()},R=async d=>{try{const s=localStorage.getItem("token"),l=await(await fetch(`${S.API_URL_Units}/evaluation-types/${r[d].id}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).json();l.success?(m.success("Evaluation type deleted"),T()):m.error(l.message||"Failed to delete evaluation type")}catch{m.error("Error occurred while deleting evaluation type")}},c=(d,s)=>{g(d.currentTarget),v(s)},i=()=>{g(null),v(null)},N=()=>{I(!0)},F=()=>{I(!1),t.resetForm(),C(null)};return e.jsxs(E,{p:3,children:[e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsxs(w,{children:[e.jsx(L,{variant:"h6",gutterBottom:!0,children:"Create New Evaluation Type"}),e.jsxs(E,{component:"form",onSubmit:t.handleSubmit,children:[e.jsx(B,{fullWidth:!0,id:"name",name:"name",label:"Evaluation Type",value:t.values.name,onChange:t.handleChange,error:t.touched.name&&!!t.errors.name,helperText:t.touched.name&&t.errors.name,margin:"normal"}),e.jsx(B,{fullWidth:!0,id:"description",name:"description",label:"Description",value:t.values.description,onChange:t.handleChange,margin:"normal"}),e.jsxs(ye,{children:[e.jsx($,{variant:"contained",color:"primary",type:"submit",startIcon:e.jsx(pe,{}),children:"Save"}),e.jsx($,{variant:"outlined",color:"secondary",onClick:t.handleReset,children:"Clear"})]})]})]})})}),e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsx(w,{children:r.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(X,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No evaluation types entered yet."})]}):e.jsx(ae,{component:J,variant:"outlined",style:{border:"1px solid #ddd"},children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Evaluation Type"}),e.jsx(j,{children:"Description"}),e.jsx(j,{align:"right",children:"Actions"})]})}),e.jsx(le,{children:r.map((d,s)=>e.jsxs(z,{children:[e.jsx(j,{component:"th",scope:"row",children:d.name}),e.jsx(j,{children:d.description||"-"}),e.jsxs(j,{align:"right",children:[e.jsx(te,{color:"primary",onClick:p=>c(p,s),children:e.jsx(se,{})}),e.jsxs(ne,{anchorEl:u,open:!!u&&U===s,onClose:i,children:[e.jsxs(P,{onClick:()=>{M(s),i()},children:[e.jsx(K,{fontSize:"small"})," Edit"]}),e.jsxs(P,{onClick:()=>{R(s),i()},children:[e.jsx(Q,{fontSize:"small"})," Delete"]})]})]})]},d.id))})]})})})})})]}),e.jsxs(ce,{open:k,onClose:F,children:[e.jsx(de,{children:a!==null?"Edit Evaluation Type":"Create Evaluation Type"}),e.jsxs(ue,{children:[e.jsx(B,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Evaluation Type Name",type:"text",fullWidth:!0,value:t.values.name,onChange:t.handleChange,error:t.touched.name&&!!t.errors.name,helperText:t.touched.name&&t.errors.name}),e.jsx(B,{margin:"dense",id:"description",name:"description",label:"Description",type:"text",fullWidth:!0,value:t.values.description,onChange:t.handleChange})]}),e.jsxs(he,{children:[e.jsx($,{onClick:F,color:"primary",children:"Cancel"}),e.jsx($,{onClick:t.handleSubmit,color:"primary",children:"Save"})]})]}),e.jsx(Ce,{})]})}function jr(){const[r,n]=x.useState([]),[a,C]=x.useState(null),[k,I]=x.useState(!1),[u,g]=x.useState(null),[U,v]=x.useState(null);x.useEffect(()=>{T()},[]);const T=async()=>{try{const d=localStorage.getItem("token"),p=await(await fetch(`${S.API_URL_Units}/frequencies`,{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();p.success?n(p.data.data):m.error("Failed to fetch frequencies")}catch{m.error("Error occurred while fetching frequencies")}},t=re({initialValues:{name:"",value:""},onSubmit:async(d,{resetForm:s})=>{try{const p=a!==null?"PATCH":"POST",l=a!==null?`${S.API_URL_Units}/frequencies/${r[a].id}`:`${S.API_URL_Units}/frequencies`,_=localStorage.getItem("token"),h=await(await fetch(l,{method:p,headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({name:d.name,value:d.value})})).json();h.success?(m.success(a!==null?"Frequency updated":"Frequency created"),T(),F()):m.error(h.message||"Failed to save frequency")}catch{m.error("Error occurred while saving frequency")}s()}}),M=d=>{t.setFieldValue("name",r[d].name),t.setFieldValue("value",r[d].value),C(d),N()},R=async d=>{try{const s=localStorage.getItem("token"),l=await(await fetch(`${S.API_URL_Units}/frequencies/${r[d].id}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).json();l.success?(m.success("Frequency deleted"),T()):m.error(l.message||"Failed to delete frequency")}catch{m.error("Error occurred while deleting frequency")}},c=(d,s)=>{g(d.currentTarget),v(s)},i=()=>{g(null),v(null)},N=()=>{I(!0)},F=()=>{I(!1),t.resetForm(),C(null)};return e.jsxs(E,{p:3,children:[e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsxs(w,{children:[e.jsx(L,{variant:"h6",gutterBottom:!0,children:"Create New Frequency"}),e.jsxs(E,{component:"form",onSubmit:t.handleSubmit,children:[e.jsx(B,{fullWidth:!0,id:"name",name:"name",label:"Frequency Name",value:t.values.name,onChange:t.handleChange,error:t.touched.name&&!!t.errors.name,helperText:t.touched.name&&t.errors.name,margin:"normal"}),e.jsx(B,{fullWidth:!0,id:"value",name:"value",label:"Value",type:"number",value:t.values.value,onChange:t.handleChange,error:t.touched.value&&!!t.errors.value,helperText:t.touched.value&&t.errors.value,margin:"normal"}),e.jsxs(ye,{children:[e.jsx($,{variant:"contained",color:"primary",type:"submit",startIcon:e.jsx(pe,{}),children:"Save"}),e.jsx($,{variant:"outlined",color:"secondary",onClick:t.handleReset,children:"Clear"})]})]})]})})}),e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(O,{variant:"outlined",children:e.jsx(w,{children:r.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(X,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No frequencies registered yet."})]}):e.jsx(ae,{component:J,variant:"outlined",style:{border:"1px solid #ddd"},children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Frequency Name"}),e.jsx(j,{children:"Value"}),e.jsx(j,{align:"right",children:"Actions"})]})}),e.jsx(le,{children:r.map((d,s)=>e.jsxs(z,{children:[e.jsx(j,{component:"th",scope:"row",children:d.name}),e.jsx(j,{children:d.value}),e.jsxs(j,{align:"right",children:[e.jsx(te,{color:"primary",onClick:p=>c(p,s),children:e.jsx(se,{})}),e.jsxs(ne,{anchorEl:u,open:!!u&&U===s,onClose:i,children:[e.jsxs(P,{onClick:()=>{M(s),i()},children:[e.jsx(K,{fontSize:"small"})," Edit"]}),e.jsxs(P,{onClick:()=>{R(s),i()},children:[e.jsx(Q,{fontSize:"small"})," Delete"]})]})]})]},d.id))})]})})})})})]}),e.jsxs(ce,{open:k,onClose:F,children:[e.jsx(de,{children:a!==null?"Edit Frequency":"Create Frequency"}),e.jsxs(ue,{children:[e.jsx(B,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Frequency Name",type:"text",fullWidth:!0,value:t.values.name,onChange:t.handleChange,error:t.touched.name&&!!t.errors.name,helperText:t.touched.name&&t.errors.name}),e.jsx(B,{margin:"dense",id:"value",name:"value",label:"Value",type:"number",fullWidth:!0,value:t.values.value,onChange:t.handleChange,error:t.touched.value&&!!t.errors.value,helperText:t.touched.value&&t.errors.value})]}),e.jsxs(he,{children:[e.jsx($,{onClick:F,color:"primary",children:"Cancel"}),e.jsx($,{onClick:t.handleSubmit,color:"primary",children:"Save"})]})]}),e.jsx(Ce,{})," "]})}function gr(){const[r,n]=x.useState([]),[a,C]=x.useState([]),[k,I]=x.useState([]),[u,g]=x.useState(null),[U,v]=x.useState(null),[T,t]=x.useState(null),[M,R]=x.useState(!1);x.useEffect(()=>{c()},[]);const c=async()=>{try{const o=localStorage.getItem("token"),q=await(await fetch(`${S.API_URL_Units}/frequencies`,{headers:{Authorization:`Bearer ${o}`}})).json();q.success?C(q.data.data):m.error("Failed to fetch frequencies");const f=await(await fetch(`${S.API_URL_Units}/get-period-activities`,{method:"GET",headers:{Authorization:`Bearer ${o}`}})).json();f.success?I(f.data):m.error("Failed to fetch activities");const D=await(await fetch(`${S.API_URL_Units}/periods`,{headers:{Authorization:`Bearer ${o}`}})).json();D.success?n(D.data.periods):m.error("Failed to fetch periods")}catch{m.error("Error occurred while fetching data")}},i=re({initialValues:{fiscalYear:"",frequency:"",activity:"",dates:[]},onSubmit:async(o,{resetForm:h})=>{const q=a.find(A=>A.id===o.frequency);if(o.fiscalYear&&q&&o.activity){const A={fiscal_year:o.fiscalYear,frequency_id:q.id,type:o.activity,dates:o.dates};try{const f=localStorage.getItem("token"),b=u!==null?"PATCH":"POST",D=u!==null?`${S.API_URL_Units}/periods/${r[u].id}`:`${S.API_URL_Units}/periods`,V=await(await fetch(D,{method:b,headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(A)})).json();V.success?(m.success(u!==null?"Period updated":"Period created"),c(),l()):m.error(V.message||"Failed to save period")}catch{m.error("Error occurred while saving period")}h()}}}),N=o=>{const h=r[o];i.setFieldValue("fiscalYear",h.fiscal_year_id),i.setFieldValue("frequency",h.frequency_id),i.setFieldValue("activity",h.type),i.setFieldValue("dates",[{startDate:h.start_date,endDate:h.end_date}]),g(o),p()},F=async o=>{try{const h=localStorage.getItem("token"),A=await(await fetch(`${S.API_URL_Units}/periods/${r[o].id}`,{method:"DELETE",headers:{Authorization:`Bearer ${h}`}})).json();A.success?(m.success("Period deleted"),c()):m.error(A.message||"Failed to delete period")}catch{m.error("Error occurred while deleting period")}},d=(o,h)=>{v(o.currentTarget),t(h)},s=()=>{v(null),t(null)},p=()=>{R(!0)},l=()=>{R(!1),i.resetForm()},_=()=>{const o=a.find(q=>q.id===i.values.frequency);if(!o)return null;const h=o.value;return Array.from({length:h},(q,A)=>{var f,b;return e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{item:!0,xs:6,children:e.jsx(B,{fullWidth:!0,id:`start_date-${A}`,name:`dates[${A}].start_date`,label:`Start Date ${A+1}`,type:"date",InputLabelProps:{shrink:!0},value:((f=i.values.dates[A])==null?void 0:f.start_date)||"",onChange:i.handleChange})}),e.jsx(y,{item:!0,xs:6,children:e.jsx(B,{fullWidth:!0,id:`end_date-${A}`,name:`dates[${A}].end_date`,label:`End Date ${A+1}`,type:"date",InputLabelProps:{shrink:!0},value:((b=i.values.dates[A])==null?void 0:b.end_date)||"",onChange:i.handleChange})})]},A)})};return e.jsxs(E,{p:3,children:[e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{item:!0,xs:12,children:e.jsx(O,{variant:"outlined",children:e.jsxs(w,{children:[e.jsx(L,{variant:"h6",gutterBottom:!0,children:"Create New Period"}),e.jsxs(E,{component:"form",onSubmit:i.handleSubmit,children:[e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(B,{fullWidth:!0,id:"fiscalYear",name:"fiscalYear",label:"Fiscal Year",value:i.values.fiscalYear,onChange:i.handleChange,error:i.touched.fiscalYear&&!!i.errors.fiscalYear,helperText:i.touched.fiscalYear&&i.errors.fiscalYear})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{id:"frequency-label",children:"Frequency"}),e.jsxs(je,{labelId:"frequency-label",id:"frequency",name:"frequency",value:i.values.frequency,onChange:i.handleChange,error:i.touched.frequency&&!!i.errors.frequency,children:[e.jsx(P,{value:"",children:"None"}),a.map(o=>e.jsxs(P,{value:o.id,children:[o.name," (",o.value,")"]},o.id))]})]})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{id:"activity-label",children:"Activity"}),e.jsxs(je,{labelId:"activity-label",id:"activity",name:"activity",value:i.values.activity,onChange:i.handleChange,error:i.touched.activity&&!!i.errors.activity,children:[e.jsx(P,{value:"",children:"None"}),k.map((o,h)=>e.jsx(P,{value:o,children:o},h))]})]})})]}),e.jsx(E,{mt:2,children:_()}),e.jsx(E,{mt:2,children:e.jsx($,{color:"primary",variant:"contained",type:"submit",children:u!==null?"Update Period":"Create Period"})})]})]})})}),e.jsx(y,{item:!0,xs:12,children:e.jsx(O,{variant:"outlined",children:e.jsx(w,{children:e.jsx(ae,{component:J,children:e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Fiscal Year"}),e.jsx(j,{children:"Activity"}),e.jsx(j,{children:"Start Date"}),e.jsx(j,{children:"End Date"}),e.jsx(j,{children:"Actions"})]})}),e.jsx(le,{children:r.length===0?e.jsx(z,{children:e.jsxs(j,{colSpan:5,align:"center",children:[e.jsx(X,{}),"No Periods Found"]})}):r.map((o,h)=>e.jsxs(z,{children:[e.jsx(j,{children:o.fiscal_year.year}),e.jsx(j,{children:o.fiscal_year.type}),e.jsx(j,{children:o.start_date}),e.jsx(j,{children:o.end_date}),e.jsxs(j,{children:[e.jsx(te,{onClick:q=>d(q,h),children:e.jsx(se,{})}),e.jsxs(ne,{anchorEl:U,open:T===h,onClose:s,children:[e.jsxs(P,{onClick:()=>{N(h),s()},children:[e.jsx(K,{})," Edit"]}),e.jsxs(P,{onClick:()=>{F(h),s()},children:[e.jsx(Q,{})," Delete"]})]})]})]},h))})]})})})})})]}),e.jsxs(ce,{open:M,onClose:l,children:[e.jsx(de,{children:u!==null?"Edit Period":"Create New Period"}),e.jsx(ue,{children:e.jsxs(E,{component:"form",onSubmit:i.handleSubmit,children:[e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(B,{fullWidth:!0,id:"fiscalYear",name:"fiscalYear",label:"Fiscal Year",value:i.values.fiscalYear,onChange:i.handleChange,error:i.touched.fiscalYear&&!!i.errors.fiscalYear,helperText:i.touched.fiscalYear&&i.errors.fiscalYear})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{id:"frequency-label",children:"Frequency"}),e.jsxs(je,{labelId:"frequency-label",id:"frequency",name:"frequency",value:i.values.frequency,onChange:i.handleChange,error:i.touched.frequency&&!!i.errors.frequency,children:[e.jsx(P,{value:"",children:"None"}),a.map(o=>e.jsxs(P,{value:o.id,children:[o.name," (",o.value,")"]},o.id))]})]})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsxs(xe,{fullWidth:!0,children:[e.jsx(me,{id:"activity-label",children:"Activity"}),e.jsxs(je,{labelId:"activity-label",id:"activity",name:"activity",value:i.values.activity,onChange:i.handleChange,error:i.touched.activity&&!!i.errors.activity,children:[e.jsx(P,{value:"",children:"None"}),k.map((o,h)=>e.jsx(P,{value:o,children:o},h))]})]})})]}),e.jsx(E,{mt:2,children:_()}),e.jsx(E,{mt:2,children:e.jsx($,{color:"primary",variant:"contained",type:"submit",children:u!==null?"Update Period":"Create Period"})})]})}),e.jsx(he,{children:e.jsx($,{onClick:l,color:"primary",children:"Cancel"})})]}),e.jsx(Ce,{})]})}function $r(){const[r,n]=ze.useState(0),a=(C,k)=>{n(k)};return e.jsx(rr,{maxWidth:"lg",style:{paddingTop:"10px"},children:e.jsxs(J,{elevation:3,style:{padding:"0px",backgroundColor:"#fff"},children:[e.jsx(er,{position:"static",style:{backgroundColor:"#E6F6F8",boxShadow:"0px 2px 2px rgba(0, 0, 0, 0.2)"},children:e.jsxs(Oe,{value:r,onChange:a,variant:"fullWidth",textColor:"secondary",indicatorColor:"secondary",children:[e.jsx(Z,{label:"Perspective Type"}),e.jsx(Z,{label:"Measuring Units"}),e.jsx(Z,{label:"Evaluation Type"}),e.jsx(Z,{label:"Frequency"}),e.jsx(Z,{label:"Period"})]})}),e.jsx(y,{container:!0,spacing:3,style:{marginTop:"10px"},children:e.jsxs(y,{item:!0,xs:12,children:[e.jsx(ee,{value:r,index:0,children:e.jsx(xr,{})}),e.jsx(ee,{value:r,index:1,children:e.jsx(pr,{})}),e.jsx(ee,{value:r,index:2,children:e.jsx(mr,{})}),e.jsx(ee,{value:r,index:3,children:e.jsx(jr,{})}),e.jsx(ee,{value:r,index:4,children:e.jsx(gr,{})})]})})]})})}function ee(r){const{children:n,value:a,index:C,...k}=r;return e.jsx("div",{role:"tabpanel",hidden:a!==C,...k,children:a===C&&e.jsx(E,{p:3,children:e.jsx(L,{children:n})})})}export{$r as default};
