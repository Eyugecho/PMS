import{al as me,am as xe,j as e,P as le,l as oe,a5 as ae,R as q,r as O,bp as ne,m as te,G as s,b as P,I as ge,p as fe,a7 as be,a3 as ee,ai as Y,f as se,h as X,aZ as We,u as we,U as Pe,V as $e,a2 as Te,B as ie,Z as Ze,F as je,q as Ke,v as He,w as qe,x as Ae,y as ue,z as Ye,n as Qe,a as Je,g as Xe}from"./index-DL-CLDEe.js";import{E as de}from"./EarningCard-BMH7Gi22.js";import{H as Se,a as Oe,D as Le}from"./DonutChart-ESgzekUH.js";var De={},et=xe;Object.defineProperty(De,"__esModule",{value:!0});var ce=De.default=void 0,tt=et(me()),rt=e;ce=De.default=(0,tt.default)((0,rt.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm12 6V9c0-.55-.45-1-1-1h-2v5h2c.55 0 1-.45 1-1m-2-3h1v3h-1zm4 2h1v-1h-1V9h1V8h-2v5h1zm-8 0h1c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9v5h1zm0-2h1v1h-1z"}),"PictureAsPdfOutlined");var Ce={},it=xe;Object.defineProperty(Ce,"__esModule",{value:!0});var he=Ce.default=void 0,ot=it(me()),st=e;he=Ce.default=(0,ot.default)((0,st.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined");const _e=({isLoading:D})=>{const w=oe(),h=ae(),[S,v]=q.useState(null),[C,B]=q.useState(null),[I,_]=O.useState(0),[F,T]=O.useState(0),[G,z]=O.useState(!0),K=()=>{z(!0),se().then(W=>{const E=X.api+X.getCount;fetch(E,{method:"GET",headers:{Authorization:`Bearer ${W}`,accept:"application/json","Content-Type":"application/json"}}).then(b=>b.json()).then(b=>{b.success?(_(b.data.used_kpis),T(b.data.my_kpi)):(_(0),T(0),toast.warning(b.message)),z(!1)}).catch(b=>{_(0),T(0),toast.warning(b.message),z(!1)})})};O.useEffect(()=>{K()},[]);const k=W=>{v(W.currentTarget),B(C)},R=()=>{v(null),B(null)},N=()=>{h("/report/KpiDetailView",{state:C}),R()};return e.jsx(e.Fragment,{children:D?e.jsx(de,{}):e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.2,color:"grey.500"},children:"KPI"})}),e.jsxs(s,{item:!0,children:[e.jsx(ge,{variant:"rounded",onClick:k,children:e.jsx(fe,{stroke:1.5,size:"1.6rem",color:"#195B99"})}),e.jsxs(be,{id:"menu-earning-card",anchorEl:S,keepMounted:!0,open:!!S,onClose:R,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(ee,{onClick:N,children:[e.jsx(he,{sx:{mr:1.75}})," View"]}),e.jsxs(ee,{onClick:R,children:[e.jsx(ce,{sx:{mr:1.75}})," Export"]})]})]})]})}),e.jsx(Y,{sx:{borderBottom:.4,borderColor:w.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,sx:{mb:.75,cursor:"pointer"},children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(s,{item:!0,xs:5,children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:15,borderColor:"rgb(77, 173, 127)",mr:2,height:"9vh"}}),e.jsxs(s,{item:!0,sx:{mt:1},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800"},children:"Total KPI"}),e.jsxs(P,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:0,mb:.75},children:[I,e.jsx(P,{component:"span",sx:{fontSize:"0.75rem",verticalAlign:"sub"},children:"Number of KPI"})]})]})]})}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:w.palette.grey[300],height:"15vh",mr:5}})}),e.jsx(s,{item:!0,xs:5,children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:15,borderColor:"rgb(234,170,103)",mr:2,height:"9vh"}}),e.jsxs(s,{item:!0,sx:{mt:1},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800"},children:"Assigned KPI"}),e.jsxs(P,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:0,mb:.75},children:[F,e.jsx(P,{component:"span",sx:{fontSize:"0.75rem",verticalAlign:"sub",color:"grey.500"},children:"Number of KPI"})]})]})]})})]})})]})})})})};_e.propTypes={isLoading:le.bool};var ze={exports:{}};(function(D){(function(w){D.exports?(w.default=w,D.exports=w):w(typeof Highcharts<"u"?Highcharts:void 0)})(function(w){var h=w?w._modules:{};function S(v,C,B,I){v.hasOwnProperty(C)||(v[C]=I.apply(null,B),typeof CustomEvent=="function"&&w.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:C,module:v[C]}})))}S(h,"Extensions/Breadcrumbs/BreadcrumbsDefaults.js",[],function(){return{lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}}}),S(h,"Extensions/Breadcrumbs/Breadcrumbs.js",[h["Extensions/Breadcrumbs/BreadcrumbsDefaults.js"],h["Core/Templating.js"],h["Core/Globals.js"],h["Core/Utilities.js"]],function(v,C,B,I){let{format:_}=C,{composed:F}=B,{addEvent:T,defined:G,extend:z,fireEvent:K,isString:k,merge:R,objectEach:N,pick:W,pushUnique:E}=I;function b(){if(this.breadcrumbs){let M=this.resetZoomButton&&this.resetZoomButton.getBBox(),a=this.breadcrumbs.options;M&&a.position.align==="right"&&a.relativeTo==="plotBox"&&this.breadcrumbs.alignBreadcrumbsGroup(-M.width-a.buttonSpacing)}}function H(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function $(){let M=this.breadcrumbs;if(M&&!M.options.floating&&M.level){let a=M.options,u=a.buttonTheme,x=(u.height||0)+2*(u.padding||0)+a.buttonSpacing,l=a.position.verticalAlign;l==="bottom"?(this.marginBottom=(this.marginBottom||0)+x,M.yOffset=x):l!=="middle"?(this.plotTop+=x,M.yOffset=-x):M.yOffset=void 0}}function L(){this.breadcrumbs&&this.breadcrumbs.redraw()}function V(M){M.resetSelection===!0&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}class Z{static compose(a,u){E(F,"Breadcrumbs")&&(T(a,"destroy",H),T(a,"afterShowResetZoom",b),T(a,"getMargins",$),T(a,"redraw",L),T(a,"selection",V),z(u.lang,v.lang))}constructor(a,u){this.elementList={},this.isDirty=!0,this.level=0,this.list=[];let x=R(a.options.drilldown&&a.options.drilldown.drillUpButton,Z.defaultOptions,a.options.navigation&&a.options.navigation.breadcrumbs,u);this.chart=a,this.options=x||{}}updateProperties(a){this.setList(a),this.setLevel(),this.isDirty=!0}setList(a){this.list=a}setLevel(){this.level=this.list.length&&this.list.length-1}getLevel(){return this.level}getButtonText(a){let u=this.chart,x=this.options,l=u.options.lang,r=W(x.format,x.showFullPath?"{level.name}":"← {level.name}"),t=l&&W(l.drillUpText,l.mainBreadcrumb),i=x.formatter&&x.formatter(a)||_(r,{level:a.levelOptions},u)||"";return(k(i)&&!i.length||i==="← ")&&G(t)&&(i=x.showFullPath?t:"← "+t),i}redraw(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1}render(){let a=this.chart,u=this.options;!this.group&&u&&(this.group=a.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:u.zIndex}).add()),u.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()}renderFullPathButtons(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()}renderSingleButton(){let a=this.chart,u=this.list,x=this.options.buttonSpacing;this.destroyListElements();let l=this.group?this.group.getBBox().width:x,r=u[u.length-2];!a.drillUpButton&&this.level>0?a.drillUpButton=this.renderButton(r,l,x):a.drillUpButton&&(this.level>0?this.updateSingleButton():this.destroySingleButton())}alignBreadcrumbsGroup(a){if(this.group){let u=this.options,x=u.buttonTheme,l=u.position,r=u.relativeTo==="chart"||u.relativeTo==="spacingBox"?void 0:"plotBox",t=this.group.getBBox(),i=2*(x.padding||0)+u.buttonSpacing;l.width=t.width+i,l.height=t.height+i;let o=R(l);a&&(o.x+=a),this.options.rtl&&(o.x+=l.width),o.y=W(o.y,this.yOffset,0),this.group.align(o,!0,r)}}renderButton(a,u,x){let l=this,r=this.chart,t=l.options,i=R(t.buttonTheme),o=r.renderer.button(l.getButtonText(a),u,x,function(n){let p,c=t.events&&t.events.click;c&&(p=c.call(l,n,a)),p!==!1&&(t.showFullPath?n.newLevel=a.level:n.newLevel=l.level-1,K(l,"up",n))},i).addClass("highcharts-breadcrumbs-button").add(l.group);return r.styledMode||o.attr(t.style),o}renderSeparator(a,u){let x=this.chart,l=this.options.separator,r=x.renderer.label(l.text,a,u,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);return x.styledMode||r.css(l.style),r}update(a){R(!0,this.options,a),this.destroy(),this.isDirty=!0}updateSingleButton(){let a=this.chart,u=this.list[this.level-1];a.drillUpButton&&a.drillUpButton.attr({text:this.getButtonText(u)})}destroy(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0}destroyListElements(a){let u=this.elementList;N(u,(x,l)=>{(a||!u[l].updated)&&((x=u[l]).button&&x.button.destroy(),x.separator&&x.separator.destroy(),delete x.button,delete x.separator,delete u[l])}),a&&(this.elementList={})}destroySingleButton(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)}resetElementListState(){N(this.elementList,a=>{a.updated=!1})}updateListElements(){let a=this.elementList,u=this.options.buttonSpacing,x=this.list,l=this.options.rtl,r=l?-1:1,t=function(c,f){return r*c.getBBox().width+r*f},i=function(c,f,A){c.translate(f-c.getBBox().width,A)},o=this.group?t(this.group,u):u,n,p;for(let c=0,f=x.length;c<f;++c){let A,U,g=c===f-1;a[(p=x[c]).level]?(A=(n=a[p.level]).button,n.separator||g?n.separator&&g&&(n.separator.destroy(),delete n.separator):(o+=r*u,n.separator=this.renderSeparator(o,u),l&&i(n.separator,o,u),o+=t(n.separator,u)),a[p.level].updated=!0):(A=this.renderButton(p,o,u),l&&i(A,o,u),o+=t(A,u),g||(U=this.renderSeparator(o,u),l&&i(U,o,u),o+=t(U,u)),a[p.level]={button:A,separator:U,updated:!0}),A&&A.setState(g?2:0)}}}return Z.defaultOptions=v.options,Z}),S(h,"Extensions/Drilldown/DrilldownDefaults.js",[],function(){return{activeAxisLabelStyle:{cursor:"pointer",color:"#0022ff",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#0022ff",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}},mapZooming:!0}}),S(h,"Extensions/Drilldown/DrilldownSeries.js",[h["Core/Animation/AnimationUtilities.js"],h["Core/Utilities.js"]],function(v,C){let{animObject:B}=v,{addEvent:I,extend:_,fireEvent:F,merge:T,pick:G,syncTimeout:z}=C;function K(l,r,t,i){l[t?"addClass":"removeClass"]("highcharts-drilldown-point"),i||l.css({cursor:r})}function k(l){let r=this,t=r.chart,i=t.drilldownLevels,o=B((t.options.drilldown||{}).animation),n=this.xAxis,p=t.styledMode;if(!l){let c;(i||[]).forEach(f=>{r.options._ddSeriesId===f.lowerSeriesOptions._ddSeriesId&&(c=f.shapeArgs,!p&&c&&(c.fill=f.color))}),c.x+=G(n.oldPos,n.pos)-n.pos,r.points.forEach(f=>{let A=f.shapeArgs;p||(A.fill=f.color),f.graphic&&f.graphic.attr(c).animate(_(f.shapeArgs,{fill:f.color||r.color}),o)}),t.drilldown&&t.drilldown.fadeInGroup(this.dataLabelsGroup),delete this.animate}}function R(l){let r=this,t=B((r.chart.options.drilldown||{}).animation);(r.trackerGroups||[]).forEach(n=>{r[n]&&r[n].on("mouseover")});let i=r.group,o=i!==r.chart.columnGroup;o&&delete r.group,this.points.forEach(n=>{let p=n.graphic,c=l.shapeArgs;if(p&&c){let f=()=>{p.destroy(),i&&o&&(i=i.destroy())};delete n.graphic,r.chart.styledMode||(c.fill=l.color),t.duration?p.animate(c,T(t,{complete:f})):(p.attr(c),f())}})}function N(l){let r=this,t=r.drilldownLevel;l||(r.points.forEach(i=>{var n;let o=i.dataLabel;i.graphic&&i.graphic.hide(),o&&(o.hidden=o.attr("visibility")==="hidden",o.hidden||(o.hide(),(n=o.connector)==null||n.hide()))}),z(()=>{if(r.points){let i=[];r.data.forEach(o=>{i.push(o)}),r.nodes&&(i=i.concat(r.nodes)),i.forEach((o,n)=>{var f;let p=n===(t&&t.pointIndex)?"show":"fadeIn",c=o.dataLabel;o.graphic&&o.visible&&o.graphic[p](p==="show"||void 0),c&&!c.hidden&&(c.fadeIn(),(f=c.connector)==null||f.fadeIn())})}},Math.max(r.chart.options.drilldown.animation.duration-50,0)),delete this.animate)}function W(l){let r=this,t=r.chart,i=r.group;t&&i&&r.options&&t.options.drilldown&&t.options.drilldown.animation&&(l&&t.mapView?(i.attr({opacity:.01}),t.mapView.allowTransformAnimation=!1,r.options.inactiveOtherPoints=!0,r.options.enableMouseTracking=!1):(i.animate({opacity:1},t.options.drilldown.animation,()=>{r.options&&(r.options.inactiveOtherPoints=!1,r.options.enableMouseTracking=G(r.userOptions&&r.userOptions.enableMouseTracking,!0),r.isDirty=!0,t.redraw())}),t.drilldown&&t.drilldown.fadeInGroup(this.dataLabelsGroup)))}function E(){let l=this.chart;l&&l.mapView&&(l.mapView.allowTransformAnimation=!1),this.options&&(this.options.inactiveOtherPoints=!0)}function b(l){let r=this.chart,t=this.group;r&&t&&(l?(t.attr({opacity:.01}),this.options&&(this.options.inactiveOtherPoints=!0)):(t.animate({opacity:1},(r.options.drilldown||{}).animation),r.drilldown&&r.drilldown.fadeInGroup(this.dataLabelsGroup)))}function H(){return this.drilldown&&!this.unbindDrilldownClick&&(this.unbindDrilldownClick=I(this,"click",L)),this}function $(){let l=this.series,r=l.chart.styledMode;this.drilldown&&l.halo&&this.state==="hover"?K(l.halo,"pointer",!0,r):l.halo&&K(l.halo,"auto",!1,r)}function L(l){let r=this.series;r.xAxis&&(r.chart.options.drilldown||{}).allowPointDrilldown===!1?r.xAxis.drilldownCategory(this.x,l):this.runDrilldown(void 0,void 0,l)}function V(l){let r=l.options||{};r.drilldown&&!this.unbindDrilldownClick?this.unbindDrilldownClick=I(this,"click",L):!r.drilldown&&r.drilldown!==void 0&&this.unbindDrilldownClick&&(this.unbindDrilldownClick=this.unbindDrilldownClick())}function Z(){let l=this.chart,r=l.options.drilldown.activeDataLabelStyle,t=l.renderer,i=l.styledMode;for(let o of this.points){let n=o.options.dataLabels,p=G(o.dlOptions,n&&n.style,{});o.drilldown&&o.dataLabel&&(r.color!=="contrast"||i||(p.color=t.getContrast(o.color||this.color)),n&&n.color&&(p.color=n.color),o.dataLabel.addClass("highcharts-drilldown-data-label"),i||o.dataLabel.css(r).css(p))}}function M(){let l=this.chart.styledMode;for(let r of this.points)r.drilldown&&r.graphic&&K(r.graphic,"pointer",!0,l)}function a(l){let r=this.chart,t=this.points,i=r.drilldownLevels[r.drilldownLevels.length-1],o=r.options.drilldown.animation;if(this.is("item")&&(o.duration=0),this.center){let n=i.shapeArgs,p=n.start,c=(n.end-p)/this.points.length,f=r.styledMode;if(!l){let A,U;for(let g=0,d=t.length;g<d;++g)A=(U=t[g]).shapeArgs,f||(n.fill=i.color,A.fill=U.color),U.graphic&&U.graphic.attr(T(n,{start:p+g*c,end:p+(g+1)*c}))[o?"animate":"attr"](A,o);r.drilldown&&r.drilldown.fadeInGroup(this.dataLabelsGroup),delete this.animate}}}function u(){this.runDrilldown()}function x(l,r,t){let i=this.series,o=i.chart,n=o.options.drilldown||{},p=(n.series||[]).length,c;for(o.ddDupes||(o.ddDupes=[]),o.colorCounter=o.symbolCounter=0;p--&&!c;)n.series&&n.series[p].id===this.drilldown&&this.drilldown&&o.ddDupes.indexOf(this.drilldown)===-1&&(c=n.series[p],o.ddDupes.push(this.drilldown));F(o,"drilldown",{point:this,seriesOptions:c,category:r,originalEvent:t,points:r!==void 0&&i.xAxis.getDDPoints(r).slice(0)},f=>{let A=f.point.series&&f.point.series.chart,U=f.seriesOptions;A&&U&&(l?A.addSingleSeriesAsDrilldown(f.point,U):A.addSeriesAsDrilldown(f.point,U))})}return{compose:function(l,r){let t=l.prototype.pointClass,i=t.prototype;if(!i.doDrilldown){let{column:o,map:n,pie:p}=r;if(I(t,"afterInit",H),I(t,"afterSetState",$),I(t,"update",V),i.doDrilldown=u,i.runDrilldown=x,I(l,"afterDrawDataLabels",Z),I(l,"afterDrawTracker",M),o){let c=o.prototype;c.animateDrilldown=k,c.animateDrillupFrom=R,c.animateDrillupTo=N}if(n){let c=n.prototype;c.animateDrilldown=W,c.animateDrillupFrom=E,c.animateDrillupTo=b}if(p){let c=p.prototype;c.animateDrilldown=a,c.animateDrillupFrom=R,c.animateDrillupTo=N}}}}}),S(h,"Extensions/Drilldown/Drilldown.js",[h["Core/Animation/AnimationUtilities.js"],h["Extensions/Breadcrumbs/Breadcrumbs.js"],h["Core/Color/Color.js"],h["Core/Globals.js"],h["Extensions/Drilldown/DrilldownDefaults.js"],h["Extensions/Drilldown/DrilldownSeries.js"],h["Core/Utilities.js"]],function(v,C,B,I,_,F,T){var G;let{animObject:z}=v,{noop:K}=I,{addEvent:k,defined:R,diffObjects:N,extend:W,fireEvent:E,merge:b,objectEach:H,pick:$,removeEvent:L,syncTimeout:V}=T,Z=1;function M(l,r){this.getDDPoints(l).forEach(function(t){t&&t.series&&t.series.visible&&t.runDrilldown&&t.runDrilldown(!0,l,r)}),this.chart.applyDrilldown()}function a(l){return this.ddPoints&&this.ddPoints[l]||[]}function u(l){let r=[],t=l.drilldownLevels;return t&&t.length&&(r[0]||r.push({level:0,levelOptions:t[0].seriesOptions}),t.forEach(function(i){let o=r[r.length-1];i.levelNumber+1>o.level&&r.push({level:i.levelNumber+1,levelOptions:b({name:i.lowerSeries.name},i.pointOptions)})})),r}class x{constructor(r){this.chart=r}addSeriesAsDrilldown(r,t){let i=this.chart||this;if(E(this,"addSeriesAsDrilldown",{seriesOptions:t}),i.mapView)if(r.series.isDrilling=!0,i.series.forEach(o=>{var n;o.options.inactiveOtherPoints=!0,(n=o.dataLabelsGroup)==null||n.destroy(),delete o.dataLabelsGroup}),i.options.drilldown&&!i.mapView.projection.hasGeoProjection&&_&&!R(N(i.options.drilldown,_).mapZooming)&&(i.options.drilldown.mapZooming=!1),i.options.drilldown&&i.options.drilldown.animation&&i.options.drilldown.mapZooming){i.mapView.allowTransformAnimation=!0;let o=z(i.options.drilldown.animation);if(typeof o!="boolean"){let n=o.complete,p=function(c){c&&c.applyDrilldown&&i.mapView&&(i.addSingleSeriesAsDrilldown(r,t),i.applyDrilldown(),i.mapView.allowTransformAnimation=!1)};o.complete=function(){n&&n.apply(this,arguments),p.apply(this,arguments)}}r.zoomTo(o)}else i.addSingleSeriesAsDrilldown(r,t),i.applyDrilldown();else i.addSingleSeriesAsDrilldown(r,t),i.applyDrilldown()}addSingleSeriesAsDrilldown(r,t){let i=this.chart||this,o=r.series,n=o.xAxis,p=o.yAxis,c=i.styledMode?{colorIndex:$(r.colorIndex,o.colorIndex)}:{color:r.color||o.color},f=o.options._levelNumber||0,A=o.points.indexOf(r);i.drilldownLevels||(i.drilldownLevels=[]),t=W(W({_ddSeriesId:Z++},c),t);let U=[],g=[],d;(d=i.drilldownLevels[i.drilldownLevels.length-1])&&d.levelNumber!==f&&(d=void 0),o.chart.series.forEach(y=>{y.xAxis===n&&(y.options._ddSeriesId=y.options._ddSeriesId||Z++,y.options.colorIndex=y.colorIndex,y.options._levelNumber=y.options._levelNumber||f,d?(U=d.levelSeries,g=d.levelSeriesOptions):(U.push(y),y.purgedOptions=b({_ddSeriesId:y.options._ddSeriesId,_levelNumber:y.options._levelNumber,selected:y.options.selected},y.userOptions),g.push(y.purgedOptions)))});let m=W({levelNumber:f,seriesOptions:o.options,seriesPurgedOptions:o.purgedOptions,levelSeriesOptions:g,levelSeries:U,shapeArgs:r.shapeArgs,bBox:r.graphic?r.graphic.getBBox():{},color:r.isNull?B.parse(c.color).setOpacity(0).get():c.color,lowerSeriesOptions:t,pointOptions:o.options.data[A],pointIndex:A,oldExtremes:{xMin:n&&n.userMin,xMax:n&&n.userMax,yMin:p&&p.userMin,yMax:p&&p.userMax},resetZoomButton:d&&d.levelNumber===f?void 0:i.resetZoomButton},c);i.drilldownLevels.push(m),n&&n.names&&(n.names.length=0);let j=m.lowerSeries=i.addSeries(t,!1);j.options._levelNumber=f+1,n&&(n.oldPos=n.pos,n.userMin=n.userMax=null,p.userMin=p.userMax=null),j.isDrilling=!0,o.type===j.type&&(j.animate=j.animateDrilldown||K,j.options.animation=!0)}applyDrilldown(){var o;let r,t=this.chart||this,i=t.drilldownLevels;i&&i.length>0&&(r=i[i.length-1].levelNumber,t.hasCartesianSeries=i.some(n=>n.lowerSeries.isCartesian),(t.drilldownLevels||[]).forEach(n=>{t.mapView&&t.options.drilldown&&t.options.drilldown.mapZooming&&(t.redraw(),n.lowerSeries.isDrilling=!1,t.mapView.fitToBounds(n.lowerSeries.bounds),n.lowerSeries.isDrilling=!0),n.levelNumber===r&&n.levelSeries.forEach(p=>{if(t.mapView){if(p.options&&p.options._levelNumber===r&&p.group){let c={};t.options.drilldown&&(c=t.options.drilldown.animation),p.group.animate({opacity:0},c,()=>{var f;p.remove(!1),n.levelSeries.filter(A=>Object.keys(A).length).length||(t.resetZoomButton&&(t.resetZoomButton.hide(),delete t.resetZoomButton),(f=t.pointer)==null||f.reset(),E(t,"afterDrilldown"),t.mapView&&(t.series.forEach(A=>{A.isDirtyData=!0,A.isDrilling=!1}),t.mapView.fitToBounds(void 0,void 0),t.mapView.allowTransformAnimation=!0),E(t,"afterApplyDrilldown"))})}}else p.options&&p.options._levelNumber===r&&p.remove(!1)})})),t.mapView||(t.resetZoomButton&&(t.resetZoomButton.hide(),delete t.resetZoomButton),(o=t.pointer)==null||o.reset(),E(t,"afterDrilldown"),t.hasCartesianSeries||t.axes.forEach(n=>{n.destroy(!0),n.init(t,b(n.userOptions,n.options))}),t.redraw(),E(t,"afterApplyDrilldown"))}drillUp(r){let t=this.chart||this;if(!t.drilldownLevels||t.drilldownLevels.length===0)return;E(t,"beforeDrillUp");let i=t.drilldownLevels,o=i[i.length-1].levelNumber,n=t.series,p=t.drilldownLevels.length,c=(m,j)=>{let y;if(n.forEach(Q=>{Q.options._ddSeriesId===m._ddSeriesId&&(y=Q)}),(y=y||t.addSeries(m,!1)).type===j.type&&y.animateDrillupTo&&(y.animate=y.animateDrillupTo),m===g.seriesPurgedOptions)return y},f=m=>{m.remove(!1),t.series.forEach(j=>{j.colorAxis&&(j.isDirtyData=!0),j.options.inactiveOtherPoints=!1}),t.redraw()},A=i.length,U,g,d;for(t.symbolCounter=t.colorCounter=0;A--;){let m,j;if((g=i[A]).levelNumber===o){if(i.pop(),!(m=g.lowerSeries).chart){for(U=n.length;U--;)if(n[U].options.id===g.lowerSeriesOptions.id&&n[U].options._levelNumber===o+1){m=n[U];break}}m.xData=[],m.xAxis&&m.xAxis.names&&(p===0||A===p-1)&&(m.xAxis.names.length=0),g.levelSeriesOptions.forEach(Q=>{let J=c(Q,m);J&&(j=J)}),E(t,"drillup",{seriesOptions:g.seriesPurgedOptions||g.seriesOptions}),j&&(j.type===m.type&&(j.drilldownLevel=g,j.options.animation=t.options.drilldown.animation,m.animateDrillupFrom&&m.chart&&m.animateDrillupFrom(g)),j.options._levelNumber=o);let y=m;if(t.mapView||y.remove(!1),j&&j.xAxis&&(d=g.oldExtremes,j.xAxis.setExtremes(d.xMin,d.xMax,!1),j.yAxis.setExtremes(d.yMin,d.yMax,!1)),g.resetZoomButton&&(t.resetZoomButton=g.resetZoomButton),t.mapView){let Q=g.levelNumber===o&&r,J=t.options.drilldown&&t.options.drilldown.animation&&t.options.drilldown.mapZooming;Q?m.remove(!1):(m.dataLabelsGroup&&(m.dataLabelsGroup.destroy(),delete m.dataLabelsGroup),t.mapView&&j&&(J&&(m.isDrilling=!0,j.isDrilling=!0,t.redraw(!1),t.mapView.fitToBounds(m.bounds,void 0,!0,!1)),t.mapView.allowTransformAnimation=!0,E(t,"afterDrillUp",{seriesOptions:j?j.userOptions:void 0}),J?(t.mapView.setView(void 0,$(t.mapView.minZoom,1),!0,{complete:function(){Object.prototype.hasOwnProperty.call(this,"complete")&&f(m)}}),j._hasTracking=!1):(t.mapView.allowTransformAnimation=!1,m.group?m.group.animate({opacity:0},t.options.drilldown.animation,()=>{f(m),t.mapView&&(t.mapView.allowTransformAnimation=!0)}):(f(m),t.mapView.allowTransformAnimation=!0)),j.isDrilling=!1))}else E(t,"afterDrillUp")}}t.mapView||t.redraw(),t.ddDupes&&(t.ddDupes.length=0),E(t,"drillupall")}fadeInGroup(r){let t=z(this.chart.options.drilldown.animation);r&&(r.hide(),V(()=>{r&&r.added&&r.fadeIn()},Math.max(t.duration-50,0)))}update(r,t){let i=this.chart;b(!0,i.options.drilldown,r),$(t,!0)&&i.redraw()}}return function(l){function r(g){let d=this.chart,m=this.getLevel()-g.newLevel,j=m>1;for(let y=0;y<m;y++)y===m-1&&(j=!1),d.drillUp(j)}function t(){let g=this.options.drilldown,d=g&&g.breadcrumbs;this.breadcrumbs||(this.breadcrumbs=new C(this,d)),this.breadcrumbs.updateProperties(u(this))}function i(){this.breadcrumbs&&this.breadcrumbs.updateProperties(u(this))}function o(){this.drilldown=new x(this)}function n(){this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy())}function p(){this.resetZoomButton&&this.showResetZoom()}function c(){(this.xAxis||[]).forEach(g=>{g.ddPoints={},g.series.forEach(d=>{let m=d.xData||[],j=d.points;for(let y=0,Q=m.length,J;y<Q;y++)if(typeof(J=d.options.data[y])!="number"&&(J=d.pointClass.prototype.optionsToObject.call({series:d},J)).drilldown){g.ddPoints[m[y]]||(g.ddPoints[m[y]]=[]);let re=y-(d.cropStart||0);g.ddPoints[m[y]].push(!j||!(re>=0)||!(re<j.length)||j[re])}}),H(g.ticks,d=>d.drillable())})}function f(g){let d=this.breadcrumbs,m=g.options.drilldown&&g.options.drilldown.breadcrumbs;d&&m&&d.update(m)}function A(g){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:$(this.newOpacity,1)},g||{duration:250})}function U(){let g=this.pos,d=this.label,m=this.axis,j=m.coll==="xAxis"&&m.getDDPoints,y=j&&m.getDDPoints(g),Q=m.chart.styledMode;j&&(d&&y&&y.length?(d.drillable=!0,d.basicStyles||Q||(d.basicStyles=b(d.styles)),d.addClass("highcharts-drilldown-axis-label"),d.removeOnDrillableClick&&L(d.element,"click"),d.removeOnDrillableClick=k(d.element,"click",function(J){J.preventDefault(),m.drilldownCategory(g,J)}),!Q&&m.chart.options.drilldown&&d.css(m.chart.options.drilldown.activeAxisLabelStyle||{})):d&&d.drillable&&d.removeOnDrillableClick&&(Q||(d.styles={},d.element.removeAttribute("style"),d.css(d.basicStyles)),d.removeOnDrillableClick(),d.removeClass("highcharts-drilldown-axis-label")))}l.compose=function(g,d,m,j,y,Q,J){F.compose(j,y);let re=d.prototype;if(!re.drillUp){let Ne=Q.prototype.Element,pe=x.prototype,Ie=g.prototype,Re=Ne.prototype,Ge=J.prototype;Ie.drilldownCategory=M,Ie.getDDPoints=a,C.compose(d,m),k(C,"up",r),re.addSeriesAsDrilldown=pe.addSeriesAsDrilldown,re.addSingleSeriesAsDrilldown=pe.addSingleSeriesAsDrilldown,re.applyDrilldown=pe.applyDrilldown,re.drillUp=pe.drillUp,k(d,"afterDrilldown",t),k(d,"afterDrillUp",i),k(d,"afterInit",o),k(d,"drillup",n),k(d,"drillupall",p),k(d,"render",c),k(d,"update",f),m.drilldown=_,Re.fadeIn=A,Ge.drillable=U}}}(G||(G={})),G}),S(h,"masters/modules/drilldown.src.js",[h["Core/Globals.js"],h["Extensions/Drilldown/Drilldown.js"],h["Extensions/Breadcrumbs/Breadcrumbs.js"]],function(v,C,B){return v.Breadcrumbs=v.Breadcrumbs||B,C.compose(v.Axis,v.Chart,v.defaultOptions,v.Series,v.seriesTypes,v.SVGRenderer,v.Tick),v})})})(ze);var nt=ze.exports;const lt=We(nt);lt(Se);const at=({data:D})=>{const w={chart:{type:"column",backgroundColor:"transparent"},title:{align:"left",text:"Evaluation Based on KPIs",style:{fontSize:"14px",color:"black",marginBottom:"15px"}},subtitle:{align:"left",text:""},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category",categories:D.length?D.map(h=>h.name):["No Data"]},yAxis:{title:{text:"Performance"},gridLineWidth:.5},legend:{enabled:!0},plotOptions:{series:{borderWidth:0,backgroundColor:"transparent",textColor:"black",dataLabels:{enabled:!1,format:"{point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px ">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'},series:[{name:"KPIs",color:"#003B73",data:D.length?D.map(h=>h.value):[0]}],credits:{enabled:!1}};return e.jsx(Oe,{highcharts:Se,options:w})},dt=()=>e.jsx(P,{variant:"h6",color:"textSecondary",align:"center",sx:{mt:2},children:"Please select a unit to display KPI performance."}),Me=()=>{const D=oe();ae();const w=we(b=>b.customization.selectedFiscalYear);q.useState(null),q.useState(null);const[h,S]=O.useState([]),[v,C]=O.useState(!1),[B,I]=O.useState(!1),[_,F]=O.useState([]),[T,G]=O.useState(""),[z,K]=O.useState({page:1,per_page:10,last_page:1,total:0}),[k,R]=O.useState(""),N=async()=>{C(!0);const b=await se(),H=X.api+X.units+`?page=${z.page}&per_page=${z.per_page}&search=${k}`,$={Authorization:`Bearer ${b}`,accept:"application/json","Content-Type":"application/json"};try{const V=await(await fetch(H,{method:"GET",headers:$})).json();V.success?(S(V.data.data),K({...z,last_page:V.data.last_page,total:V.data.total}),I(!1)):(S([]),I(!0))}catch(L){ie(L.message),I(!0)}finally{C(!1)}},W=async()=>{if(w&&T){C(!0);const b=await se(),H=X.api+X.unitKpiPerformance+`?unit_id=${T}&fiscal_year_id=${w==null?void 0:w.id}`,$={Authorization:`Bearer ${b}`,accept:"application/json","Content-Type":"application/json"};try{const V=await(await fetch(H,{method:"GET",headers:$})).json();if(V.success){const Z=V.data.performance_data.map(M=>({name:M.kpi_name,value:M.kpi_performance}));F(Z)}else F([]),ie.warning(V.message)}catch(L){F([]),ie.warning(L.message)}finally{C(!1)}}};O.useEffect(()=>{W()},[T,w]),O.useEffect(()=>{N()},[z.page,z.per_page,k]);const E=b=>{G(b.target.value)};return e.jsx(e.Fragment,{children:v?e.jsx(de,{}):e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(Y,{sx:{borderBottom:.4,borderColor:D.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.5,color:"grey.500"},children:"KPI Performance"})}),e.jsx(s,{item:!0,sx:{textAlign:"right"},children:e.jsxs(Pe,{variant:"outlined",children:[e.jsx($e,{id:"unit-select-label",children:"Select Unit"}),e.jsx(Te,{labelId:"unit-select-label",id:"unit-select",value:T,onChange:E,label:"Select Unit",children:h.map(b=>e.jsx(ee,{value:b.id,children:b.name},b.id))})]})})]})}),e.jsx(Y,{sx:{borderBottom:.4,borderColor:D.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,sx:{mb:.75,cursor:"pointer",mt:2},children:T?e.jsx(s,{container:!0,alignItems:"center",children:e.jsx(s,{item:!0,xs:10,children:e.jsx(s,{container:!0,children:e.jsx(s,{item:!0,sx:{mt:1},lg:12,children:e.jsx(at,{data:_})})})})}):e.jsx(dt,{})})]})})})})};Me.propTypes={isLoading:le.bool};const ct=()=>{const D=oe(),w=ae(),h=we(L=>L.customization.selectedFiscalYear),[S,v]=q.useState(null),[C,B]=q.useState(null),[I,_]=q.useState([]),[F,T]=q.useState([]),[G,z]=q.useState(null),[K,k]=q.useState(!1),[R,N]=q.useState(!1),W=async()=>{if(!h){ie.error("Please select a fiscal year"),k(!1);return}k(!0);const L=await se(),V=`${X.api}${X.myUnitPerformance}?fiscal_year_id=${h==null?void 0:h.id}`,Z={Authorization:`Bearer ${L}`,accept:"application/json","Content-Type":"application/json"};try{const a=await(await fetch(V,{method:"GET",headers:Z})).json();if(a.success){_(a.data.my_unit.performance);const u=a.data.child_units.map(x=>{let l=0;const r=x.performance.length;for(let i=0;i<r;i++)l+=x.performance[i][`quarter${i+1}`].overall;const t=l/r;return{unitId:x.unit.id,unitName:x.unit.name,performance:t}});T(u),N(!1)}else ie.warning(a.message),N(!0)}catch(M){ie.error(M.message),N(!0)}finally{k(!1)}};O.useEffect(()=>{W()},[h]);const E=()=>{if(I.length>0){let L=0;const V=I.length;for(let Z=0;Z<V;Z++)L+=I[Z][`quarter${Z+1}`].overall;return L/V}return 0},b=L=>{v(L.currentTarget),B(C)},H=()=>{v(null),B(null)},$=L=>{z(L),w("/report/overall_company",{state:{unitId:L.unitId,unitName:L.unitName,performance:L.performance}})};return e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:K?e.jsx(te,{sx:{padding:2,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ze,{size:22})}):R?e.jsx(je,{severity:"error",title:"Server Error",description:"Failed to fetch company performance data."}):F.length===0?e.jsx(je,{severity:"info",title:"No Data",description:"No performance data available for the selected fiscal year."}):e.jsx(e.Fragment,{children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.2,color:"grey.500"},children:"Company Performance"})}),e.jsxs(s,{item:!0,children:[e.jsx(ge,{variant:"rounded",onClick:b,children:e.jsx(fe,{stroke:1.5,size:"1.6rem",color:"#195B99"})}),e.jsxs(be,{id:"menu-earning-card",anchorEl:S,keepMounted:!0,open:!!S,onClose:H,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(ee,{children:[e.jsx(he,{sx:{mr:1.75}})," View"]}),e.jsxs(ee,{onClick:H,children:[e.jsx(ce,{sx:{mr:1.75}})," Export"]})]})]})]})}),e.jsx(Y,{sx:{borderBottom:.4,borderColor:D.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,sx:{mb:.75,cursor:"pointer"},children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(s,{item:!0,xs:5,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",children:e.jsx(s,{item:!0,children:e.jsx(Le,{value:E(),size:250,label:"Ave. Performance"})})})}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:D.palette.grey[300],height:"35vh",mr:5}})}),e.jsx(s,{item:!0,xs:5,children:e.jsx(s,{container:!0,direction:"column",children:F.map((L,V)=>e.jsxs(s,{container:!0,alignItems:"center",onClick:()=>$(L),children:[e.jsx(s,{item:!0,children:e.jsx(Le,{value:L.performance,size:130,colors:["#4dad7f","#ebebeb"]})}),e.jsxs(s,{item:!0,sx:{mt:1,ml:2},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:1},children:L.unitName}),e.jsx(P,{sx:{fontSize:"0.75rem",verticalAlign:"sub",color:"grey.500"},children:"Scored Performance"})]})]},V))})})]})})]})})})})},Ve=({isLoading:D})=>{const w=oe(),h=ae(),[S,v]=q.useState(null),[C,B]=q.useState(null),[I,_]=O.useState(0),[F,T]=O.useState(0),[G,z]=O.useState(0),[K,k]=O.useState(0),[R,N]=O.useState(0),[W,E]=O.useState(!0),[b,H]=O.useState(!1),$=async()=>{const M=await se(),a=X.api+X.getCount,u={Authorization:`Bearer ${M}`,accept:"application/json","Content-Type":"application/json"};fetch(a,{method:"GET",headers:u}).then(x=>x.json()).then(x=>{x.success?(_(x.data.employees),T(x.data.active_employee),z(x.data.inactive_employee),k(x.data.eligible_employee),N(x.data.not_eligible_employee),E(!1),H(!1)):(E(!1),H(!0))}).catch(x=>{toast(x.message),H(!0),E(!1)})};O.useEffect(()=>{$()},[]);const L=M=>{v(M.currentTarget),B(C)},V=()=>{v(null),B(null)},Z=()=>{h("/report/overall_company",{state:C}),V()};return e.jsx(e.Fragment,{children:D?e.jsx(de,{}):e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(Y,{sx:{borderBottom:.4,borderColor:w.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.2,color:"grey.500"},children:"Employee"})}),e.jsxs(s,{item:!0,children:[e.jsx(ge,{variant:"rounded",onClick:L,children:e.jsx(fe,{stroke:1.5,size:"1.6rem",color:"#195B99"})}),e.jsxs(be,{id:"menu-earning-card",anchorEl:S,keepMounted:!0,open:!!S,onClose:V,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(ee,{onClick:Z,children:[e.jsx(he,{sx:{mr:1.75}})," View"]}),e.jsxs(ee,{onClick:V,children:[e.jsx(ce,{sx:{mr:1.75}})," Export"]})]})]})]})}),e.jsx(s,{item:!0,sx:{cursor:"pointer",mt:5},children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(s,{item:!0,xs:4,children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:15,borderColor:"rgb(0,59,115)",mr:6,ml:1,height:"9vh"}}),e.jsxs(s,{item:!0,children:[e.jsx(P,{variant:"h4",mt:1,children:"Total Employee"}),e.jsxs(P,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1},children:[I,e.jsx(P,{component:"span",sx:{fontSize:"0.75rem",verticalAlign:"sub",color:"grey.500"},children:"Number of Employee"})]})]})]})}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:w.palette.grey[300],height:"15vh",mr:5}})}),e.jsxs(s,{item:!0,xs:3,children:[e.jsx(s,{container:!0,alignItems:"center",children:e.jsxs(s,{item:!0,sx:{ml:2},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:1},children:"Active Employee"}),e.jsx(P,{sx:{fontSize:"24px",verticalAlign:"sub",color:"#4DAD7F",fontWeight:"900"},children:F})]})}),e.jsx(s,{container:!0,alignItems:"center",children:e.jsxs(s,{item:!0,sx:{mt:1,ml:2},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:1},children:"Inactive Employee"}),e.jsx(P,{sx:{fontSize:"24px",verticalAlign:"sub",color:"#fe0100",fontWeight:"900"},children:G})]})})]}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:w.palette.grey[300],height:"15vh",mr:5}})}),e.jsxs(s,{item:!0,xs:3,children:[e.jsx(s,{container:!0,alignItems:"center",children:e.jsxs(s,{item:!0,sx:{ml:2},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:1},children:"Eligable Employee"}),e.jsx(P,{sx:{fontSize:"24px",verticalAlign:"sub",color:"#4DAD7F",fontWeight:"900"},children:K})]})}),e.jsx(s,{container:!0,alignItems:"center",children:e.jsxs(s,{item:!0,sx:{mt:1,ml:2},children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:1},children:"Non-Eligable Employee"}),e.jsx(P,{sx:{fontSize:"24px",verticalAlign:"sub",color:"#fe0100",fontWeight:"900"},children:R})]})})]})]})})]})})})})};Ve.propTypes={isLoading:le.bool};const ht=({data:D,title:w,size:h,colors:S})=>{const v=oe(),C={chart:{type:"pie",backgroundColor:"transparent",width:h,height:h,events:{render(){const B=this,I=B.series[0];let _=B.options.chart.custom;_||(_=B.options.chart.custom=B.renderer.label().css({color:v.palette.text.primary,textAnchor:"middle"}).add());const F=I.center[0]+B.plotLeft,T=I.center[1]+B.plotTop-_.attr("height")/2;_.attr({x:F,y:T}),_.css({fontSize:`${I.center[2]/12}px`})}}},accessibility:{point:{valueSuffix:"%"}},title:{text:w,align:"left"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.0f}%</b>"},legend:{enabled:!1},plotOptions:{pie:{borderWidth:0,backgroundColor:"transparent",innerSize:"65%",dataLabels:{enabled:!0}},series:{allowPointSelect:!0,cursor:"pointer",borderRadius:8,dataLabels:[{enabled:!1,distance:30,format:"{point.name}"},{enabled:!1,distance:-15,format:"{point.percentage:.0f}%",style:{fontSize:"0.9em"}}],showInLegend:!1}},series:[{name:w,colorByPoint:!0,data:D,colors:S||[]}],credits:{enabled:!1}};return e.jsx(Oe,{highcharts:Se,options:C})},ke=["#003B73","#eaaa67","#4dad7f","#fae38f","#ff6f61","#6b5b95","#88b04b","#f7cac9","#92a8d1","#f7786b"],Ue=()=>{const D=oe(),w=ae(),[h,S]=q.useState(null),[v,C]=q.useState(null),[B,I]=q.useState([]),[_,F]=q.useState(!0),[T,G]=q.useState(!1),z=async()=>{const E=await se(),b=X.api+X.getEmployeesInDep,H={Authorization:`Bearer ${E}`,accept:"application/json","Content-Type":"application/json"};fetch(b,{method:"GET",headers:H}).then($=>$.json()).then($=>{$.success?(I($.data.child_units),F(!1),G(!1)):(F(!1),G(!0))}).catch($=>{G(!0),F(!1)})};O.useEffect(()=>{z()},[]);const K=E=>{S(E.currentTarget),C(v)},k=()=>{S(null),C(null)},R=()=>{w("/report/overall_company",{state:v}),k()},N=B.map((E,b)=>({name:E.unit,y:E.employee_count})),W=N.map((E,b)=>ke[b%ke.length]);return e.jsx(e.Fragment,{children:_?e.jsx(de,{}):e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(Y,{sx:{borderBottom:.4,borderColor:D.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.2,color:"grey.500"},children:"Employee In Department"})}),e.jsxs(s,{item:!0,children:[e.jsx(ge,{variant:"rounded",onClick:K,children:e.jsx(fe,{stroke:1.5,size:"1.6rem",color:"#195B99"})}),e.jsxs(be,{id:"menu-earning-card",anchorEl:h,keepMounted:!0,open:!!h,onClose:k,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsxs(ee,{onClick:R,children:[e.jsx(he,{sx:{mr:1.75}})," View"]}),e.jsxs(ee,{onClick:k,children:[e.jsx(ce,{sx:{mr:1.75}})," Export"]})]})]})]})}),e.jsx(Y,{sx:{borderBottom:.4,borderColor:D.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,sx:{mb:.75,cursor:"pointer"},children:e.jsxs(s,{container:!0,alignItems:"center",children:[e.jsx(s,{item:!0,xs:5,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",children:e.jsx(s,{item:!0,children:e.jsx(ht,{data:N,size:250,colors:W})})})}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:D.palette.grey[300],height:"30vh",mr:5}})}),e.jsxs(s,{item:!0,xs:6,children:[e.jsx(P,{sx:{fontSize:"1rem",fontWeight:500,color:"grey.800",mb:3},children:"Number of Employees within Departments"}),e.jsx(s,{container:!0,spacing:2,children:B.map((E,b)=>e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:4,children:e.jsxs(te,{sx:{border:"1px solid",borderColor:D.palette.grey[300],borderRadius:1,p:2,display:"flex",alignItems:"center"},children:[e.jsx(te,{sx:{width:7,height:30,backgroundColor:W[b%W.length],mr:1}}),e.jsxs(te,{children:[e.jsx(P,{sx:{fontSize:"0.8rem",fontWeight:500,color:"grey.800",mb:.2},children:E.unit}),e.jsxs(P,{sx:{fontSize:"0.75rem",color:"grey.500"},children:[E.employee_count," Employees"]})]})]})},b))})]})]})})]})})})})};Ue.propTypes={isLoading:le.bool};var Ee={},pt=xe;Object.defineProperty(Ee,"__esModule",{value:!0});var ye=Ee.default=void 0,ut=pt(me()),mt=e;ye=Ee.default=(0,ut.default)((0,mt.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward");var Be={},xt=xe;Object.defineProperty(Be,"__esModule",{value:!0});var ve=Be.default=void 0,gt=xt(me()),ft=e;ve=Be.default=(0,gt.default)((0,ft.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward");const bt=({view:D,data:w})=>e.jsx(Ke,{children:e.jsxs(He,{sx:{minWidth:840,borderCollapse:"collapse"},"aria-label":"Organization unit table",children:[e.jsx(qe,{children:e.jsx(Ae,{children:["Rank",D==="Employee"?"Employee Name":"Unit Name","Score"].map(h=>e.jsx(ue,{sx:{color:"grey.500",fontWeight:"bold",fontSize:"0.9rem",borderBottom:"2px solid #ddd",padding:"12px 16px","&:not(:last-of-type)":{borderRight:"1px solid #ddd"}},children:h},h))})}),e.jsx(Ye,{children:w.map((h,S)=>e.jsxs(Ae,{sx:{backgroundColor:S===0?"#d0f0c0":"transparent",borderRadius:2,"&:nth-of-type(odd)":{backgroundColor:S!==0?"#dee8f3":"#d0f0c0"},"&:hover":{backgroundColor:"#f1f1f1"}},children:[e.jsxs(ue,{sx:{border:0,padding:"12px 16px",display:"flex",alignItems:"center"},children:[S+1,S===0&&e.jsx(ye,{sx:{color:"green",marginLeft:"8px"}}),S===w.length-1&&e.jsx(ve,{sx:{color:"red",marginLeft:"8px"}})]}),e.jsx(ue,{sx:{border:0,padding:"12px 16px"},children:h.name}),e.jsxs(ue,{sx:{border:0,padding:"12px 14px",display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx(P,{variant:"subtitle3",sx:{flexGrow:1},children:h.score})}),S===0&&e.jsx(ye,{sx:{color:"green",marginLeft:"2px"}}),S===w.length-1&&e.jsx(ve,{sx:{color:"red",marginLeft:"2px"}})]})]},h.id))})]})}),Fe=({isLoading:D})=>{const w=oe(),h=we(z=>z.customization.selectedFiscalYear),[S,v]=O.useState("Unit"),[C,B]=O.useState({employees:[],units:[]}),[I,_]=O.useState(!1),F=async()=>{_(!0);const z=await se(),K=X.api+X.getRankings+`?fiscal_year_id=${h==null?void 0:h.id}`,k={Authorization:`Bearer ${z}`,accept:"application/json","Content-Type":"application/json"};try{const N=await(await fetch(K,{method:"GET",headers:k})).json();N.success?B(N.data.rankings):(B({employees:[],units:[]}),ie.warning(N.message))}catch(R){B({employees:[],units:[]}),ie.warning(R.message)}finally{_(!1)}};O.useEffect(()=>{F()},[h]);const T=z=>{v(z.target.value)},G=S==="Employee"?C.employees:C.units;return e.jsx(e.Fragment,{children:D?e.jsx(de,{}):e.jsx(ne,{border:!1,content:!1,children:e.jsx(te,{sx:{ml:1},children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(Y,{sx:{borderBottom:.4,borderColor:w.palette.grey[300],marginY:3}}),e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(P,{variant:"h3",sx:{mt:1.5,color:"grey.500"},children:"Ranking"})}),e.jsx(s,{item:!0,children:e.jsx(Pe,{sx:{minWidth:100,marginBottom:"10px"},children:e.jsxs(Te,{value:S,onChange:T,children:[e.jsx(ee,{value:"Employee",children:"Employee"}),e.jsx(ee,{value:"Unit",children:"Unit"})]})})})]})}),e.jsx(s,{item:!0,sx:{mb:.75,cursor:"pointer"},children:e.jsx(s,{container:!0,alignItems:"center",children:e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",children:e.jsx(s,{item:!0,children:G.length>0?e.jsx(bt,{view:S,data:G,isLoading:I}):e.jsx(je,{severity:S==="Employee"?"error":"department"})})})})})})]})})})})};Fe.propTypes={isLoading:le.bool};const wt=()=>{const[D,w]=O.useState(!0),h=oe();return O.useEffect(()=>{w(!1)},[]),e.jsx(Qe,{maxWidth:"lg",title:"Reports",children:e.jsx(Je,{sx:{marginLeft:"10px",padding:"8px",marginTop:"25px"},children:e.jsx(s,{container:!0,spacing:Xe,children:e.jsx(s,{item:!0,xs:12,children:e.jsxs(s,{container:!0,spacing:"0",children:[e.jsxs(s,{item:!0,lg:6,md:6,sm:6,xs:12,children:[e.jsx(_e,{isLoading:D}),e.jsx(Me,{isLoading:D}),e.jsx(Fe,{isLoading:D})]}),e.jsx(s,{item:!0,xs:0,children:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderRightWidth:.4,borderColor:h.palette.grey[300],height:"130vh",ml:1}})}),e.jsxs(s,{item:!0,lg:5.9,md:6,sm:6,xs:12,children:[e.jsx(ct,{isLoading:D}),e.jsx(Ve,{isLoading:D}),e.jsx(Ue,{isLoading:D})]})]})})})})})};export{wt as default};
