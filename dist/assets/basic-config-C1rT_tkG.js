import{r as l,g as Le,d as Oe,s as ie,v as It,a as ze,z as Ft,_ as se,be as Et,aO as $t,j as e,c as Ce,b8 as Ye,h as Ge,B as wt,K as bt,au as vt,av as St,a2 as u,ad as Pe,Y as _e,a8 as E,a0 as V,C as H,ar as pe,p as L,J as ke,am as Ae,aj as X,W as R,at as He,aN as Ct,a6 as K,aq as Se,ba as Dt,P as Ne,aM as Ve,ap as qt,S as Rt,U as Bt,ai as Ut,R as Nt,a9 as Mt,a4 as Vt}from"./index-BrIZ1aRM.js";import{d as Te,a as Ie}from"./Delete-CJ0mWhfC.js";import{d as Fe}from"./MoreVert-TQNYNIEM.js";import{c as O}from"./config-By_uygwP.js";import{T as Ee}from"./TableContainer-CbJxeCPv.js";import{T as $e,a as we,b as oe,c as De}from"./TableRow-BXiBQlkf.js";import{T as G}from"./TableCell-BqWHfhA4.js";import{a as qe,c as Re,b as Be,D as Ue}from"./DialogTitle-CTwNxPSd.js";import{S as Wt}from"./Snackbar-CvP7LuYl.js";import{A as Lt}from"./Alert-CR4F7He2.js";import{A as Ot}from"./AddButton-Z1cywGJl.js";import{S as Pt,a as zt,s as ce,b as Yt,c as Gt,d as Ht}from"./Check-kDV9V5_u.js";import{F as Jt}from"./index-CJagu-9E.js";import"./Close-BzhvbiYv.js";import"./IconPlus-CfO6zmqS.js";import"./error-DW4k7GIP.js";const _t=l.createContext({});function Qt(t){return Oe("MuiAccordion",t)}const ve=Le("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Zt=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Kt=Ye(),Xt=t=>{const{classes:s,square:i,expanded:f,disabled:n,disableGutters:C}=t;return Ge({root:["root",!i&&"rounded",f&&"expanded",n&&"disabled",!C&&"gutters"],region:["region"]},Qt,s)},ea=ie(It,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[{[`& .${ve.region}`]:s.region},s.root,!i.square&&s.rounded,!i.disableGutters&&s.gutters]}})(({theme:t})=>{const s={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],s),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],s)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ve.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ve.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t})=>({variants:[{props:s=>!s.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:s=>!s.disableGutters,style:{[`&.${ve.expanded}`]:{margin:"16px 0"}}}]})),me=l.forwardRef(function(s,i){const f=Kt({props:s,name:"MuiAccordion"}),{children:n,className:C,defaultExpanded:$=!1,disabled:k=!1,disableGutters:z=!1,expanded:I,onChange:q,square:b=!1,slots:p={},slotProps:g={},TransitionComponent:v,TransitionProps:M}=f,B=ze(f,Zt),[A,w]=Ft({controlled:I,default:$,name:"Accordion",state:"expanded"}),N=l.useCallback(D=>{w(!A),q&&q(D,!A)},[A,q,w]),[m,...a]=l.Children.toArray(n),d=l.useMemo(()=>({expanded:A,disabled:k,disableGutters:z,toggle:N}),[A,k,z,N]),y=se({},f,{square:b,disabled:k,disableGutters:z,expanded:A}),T=Xt(y),Y=se({transition:v},p),ee=se({transition:M},g),[W,S]=Et("transition",{elementType:$t,externalForwardedProps:{slots:Y,slotProps:ee},ownerState:y});return e.jsxs(ea,se({className:Ce(T.root,C),ref:i,ownerState:y,square:b},B,{children:[e.jsx(_t.Provider,{value:d,children:m}),e.jsx(W,se({in:A,timeout:"auto"},S,{children:e.jsx("div",{"aria-labelledby":m.props.id,id:m.props["aria-controls"],role:"region",className:T.region,children:a})}))]}))});function ta(t){return Oe("MuiAccordionDetails",t)}Le("MuiAccordionDetails",["root"]);const aa=["className"],na=Ye(),ra=t=>{const{classes:s}=t;return Ge({root:["root"]},ta,s)},sa=ie("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),xe=l.forwardRef(function(s,i){const f=na({props:s,name:"MuiAccordionDetails"}),{className:n}=f,C=ze(f,aa),$=f,k=ra($);return e.jsx(sa,se({className:Ce(k.root,n),ref:i,ownerState:$},C))});function oa(t){return Oe("MuiAccordionSummary",t)}const ue=Le("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ia=["children","className","expandIcon","focusVisibleClassName","onClick"],la=Ye(),ca=t=>{const{classes:s,expanded:i,disabled:f,disableGutters:n}=t;return Ge({root:["root",i&&"expanded",f&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},oa,s)},da=ie(wt,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>{const s={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],s),[`&.${ue.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ue.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${ue.disabled})`]:{cursor:"pointer"},variants:[{props:i=>!i.disableGutters,style:{[`&.${ue.expanded}`]:{minHeight:64}}}]}}),ua=ie("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,s)=>s.content})(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:s=>!s.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${ue.expanded}`]:{margin:"20px 0"}}}]})),pa=ie("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,s)=>s.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${ue.expanded}`]:{transform:"rotate(180deg)"}})),ge=l.forwardRef(function(s,i){const f=la({props:s,name:"MuiAccordionSummary"}),{children:n,className:C,expandIcon:$,focusVisibleClassName:k,onClick:z}=f,I=ze(f,ia),{disabled:q=!1,disableGutters:b,expanded:p,toggle:g}=l.useContext(_t),v=A=>{g&&g(A),z&&z(A)},M=se({},f,{expanded:p,disabled:q,disableGutters:b}),B=ca(M);return e.jsxs(da,se({focusRipple:!1,disableRipple:!0,disabled:q,component:"div","aria-expanded":p,className:Ce(B.root,C),focusVisibleClassName:Ce(B.focusVisible,k),onClick:v,ref:i,ownerState:M},I,{children:[e.jsx(ua,{className:B.content,ownerState:M,children:n}),$&&e.jsx(pa,{className:B.expandIconWrapper,ownerState:M,children:$})]}))}),ha=bt(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),ma=bt(e.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline");var Je={},xa=St;Object.defineProperty(Je,"__esModule",{value:!0});var fe=Je.default=void 0,ga=xa(vt()),Me=e;fe=Je.default=(0,ga.default)([(0,Me.jsx)("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),(0,Me.jsx)("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),(0,Me.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-3.5c.73 0 1.39.19 1.97.53.12-.14.86-.98 1.01-1.14-.85-.56-1.87-.89-2.98-.89-1.11 0-2.13.33-2.99.88.97 1.09.01.02 1.01 1.14.59-.33 1.25-.52 1.98-.52"},"2")],"SentimentDissatisfied");function fa(){const[t,s]=l.useState([]),[i,f]=l.useState(null),[n,C]=l.useState(!1),[$,k]=l.useState(null),[z,I]=l.useState(null);l.useEffect(()=>{q()},[]);const q=async()=>{try{const m=localStorage.getItem("token"),d=await(await fetch(`${O.API_URL_Units}/measuring-units`,{method:"GET",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).json();d.success?s(d.data.data):u.error(`Failed to fetch measuring units: ${d.message}`)}catch(m){u.error(`Error fetching measuring units: ${m.message}`)}},b=async m=>{const a=i!==null?"PATCH":"POST",d=i!==null?`${O.API_URL_Units}/measuring-units/${t[i].id}`:`${O.API_URL_Units}/measuring-units`;try{const y=localStorage.getItem("token"),Y=await(await fetch(d,{method:a,headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},body:JSON.stringify({name:m.measuringUnit,description:m.measuringType})})).json();Y.success?(q(),w(),u.success("Measuring unit saved successfully!")):u.error(`Error saving measuring unit: ${Y.message}`)}catch(y){u.error(`Error saving measuring unit: ${y.message}`)}},p=m=>{v.setFieldValue("measuringUnit",t[m].name),v.setFieldValue("measuringType",t[m].description),f(m),A()},g=async m=>{try{const a=localStorage.getItem("token"),d=await fetch(`${O.API_URL_Units}/measuring-units/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(d.status===204)s(y=>y.filter(T=>T.id!==m)),u.success("Measuring unit deleted successfully!");else{const y=await d.json();y.success?(s(T=>T.filter(Y=>Y.id!==m)),u.success("Measuring unit deleted successfully!")):u.error(`Failed to delete measuring unit: ${y.message}`)}}catch(a){u.error(`Error deleting measuring unit: ${a.message}`)}},v=Pe({initialValues:{measuringUnit:"",measuringType:""},onSubmit:(m,{resetForm:a})=>{b(m),a()}}),M=(m,a)=>{k(m.currentTarget),I(a)},B=()=>{k(null),I(null)},A=()=>{C(!0)},w=()=>{C(!1),v.resetForm(),f(null)},N=_e();return e.jsxs(E,{p:0,children:[e.jsx(V,{container:!0,spacing:3,children:e.jsxs(V,{item:!0,xs:12,children:[e.jsx(V,{item:!0,xs:12,style:{padding:"2px 2px 2px 25px"},children:e.jsx(H,{variant:"contained",color:"primary",onClick:A,children:"Add Measuring Unit"})}),e.jsx(pe,{children:t.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(fe,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No measuring units entered yet."})]}):e.jsx(Ee,{style:{border:"1px solid #ddd"},children:e.jsxs($e,{sx:{minWidth:650,borderCollapse:"collapse"},children:[e.jsx(we,{children:e.jsx(oe,{children:["Measuring Unit","Description","Actions"].map(m=>e.jsx(G,{sx:{background:N.palette.grey[100],color:"#000",fontWeight:"bold",fontSize:"0.9rem",borderBottom:`2px solid ${N.palette.divider}`,position:"relative",padding:"12px 16px","&:not(:last-of-type)":{borderRight:`1px solid ${N.palette.divider}`}},children:m},m))})}),e.jsx(De,{children:t.map((m,a)=>e.jsxs(oe,{sx:{backgroundColor:N.palette.background.paper,borderRadius:2,"&:nth-of-type(odd)":{backgroundColor:N.palette.grey[50]},"&:hover":{backgroundColor:N.palette.grey[100]}},children:[e.jsx(G,{component:"th",scope:"row",sx:{display:"flex",alignItems:"center",border:0,padding:"12px 16px"},children:m.name}),e.jsx(G,{sx:{border:0,padding:"12px 16px"},children:m.description}),e.jsxs(G,{sx:{border:0,padding:"12px 16px"},children:[e.jsx(ke,{color:"primary",onClick:d=>M(d,a),children:e.jsx(Fe,{})}),e.jsxs(Ae,{anchorEl:$,open:!!$&&z===a,onClose:B,children:[e.jsxs(X,{onClick:()=>{p(a),B()},children:[e.jsx(Te,{fontSize:"small"})," Edit"]}),e.jsxs(X,{onClick:()=>{g(m.id),B()},children:[e.jsx(Ie,{fontSize:"small"})," Delete"]})]})]})]},m.id))})]})})})]})}),e.jsxs(qe,{open:n,onClose:w,children:[e.jsx(Re,{children:i!==null?"Edit Measuring Unit":"Add New Measuring Unit"}),e.jsx(Be,{children:e.jsxs(E,{component:"form",onSubmit:v.handleSubmit,children:[e.jsx(R,{fullWidth:!0,id:"measuringUnit",name:"measuringUnit",label:"Measuring Unit",value:v.values.measuringUnit,onChange:v.handleChange,error:v.touched.measuringUnit&&!!v.errors.measuringUnit,helperText:v.touched.measuringUnit&&v.errors.measuringUnit,margin:"normal"}),e.jsx(R,{fullWidth:!0,id:"measuringType",name:"measuringType",label:"Type (e.g., Numerical, Percentage)",value:v.values.measuringType,onChange:v.handleChange,error:v.touched.measuringType&&!!v.errors.measuringType,helperText:v.touched.measuringType&&v.errors.measuringType,margin:"normal"}),e.jsxs(Ue,{children:[e.jsx(H,{onClick:w,color:"primary",children:"Cancel"}),e.jsx(H,{type:"submit",color:"primary",children:"Save"})]})]})})]}),e.jsx(He,{})]})}function ya(){const[t,s]=l.useState([]),[i,f]=l.useState(null),[n,C]=l.useState(!1),[$,k]=l.useState(!1),[z,I]=l.useState(""),[q,b]=l.useState("success"),[p,g]=l.useState(null),[v,M]=l.useState(null);l.useEffect(()=>{B()},[]);const B=async()=>{try{const S=localStorage.getItem("token"),J=await(await fetch(`${O.API_URL_Units}/perspective-types`,{method:"GET",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}})).json();J.success?s(J.data.data):console.error("Failed to fetch perceptives:",J.message)}catch(S){console.error("Error fetching perceptives:",S)}},A=async S=>{try{const D=localStorage.getItem("token");if(!D)throw new Error("No token found");const J=i!==null?"PATCH":"POST",te=i!==null?`${O.API_URL_Units}/perspective-types/${t[i].id}`:`${O.API_URL_Units}/perspective-types`,ae=await fetch(te,{method:J,headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json",Accept:"application/json, text/plain, */*"},body:JSON.stringify({name:S.perspectiveName})}),ne=await ae.json();ae.ok?ne.success?(s(Q=>i!==null?Q.map((ye,je)=>je===i?ne.data:ye):[...Q,ne.data]),y(),I("Perspective saved successfully!"),b("success")):(I("Error creating/updating perspective: "+ne.message),b("error")):(I("Perspective already exists"),b("warning")),k(!0)}catch(D){I("Error creating/updating perspective: "+D.message),b("error"),k(!0)}},w=async S=>{await A(S)},N=S=>{a.setFieldValue("perspectiveName",t[S].name),f(S),d(),Y()},m=async S=>{try{const D=localStorage.getItem("token"),J=await fetch(`${O.API_URL_Units}/perspective-types/${S}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(J.status===204)s(te=>te.filter(ae=>ae.id!==S)),I("Perspective deleted successfully!"),b("success");else{const te=await J.json();te.success?(s(ae=>ae.filter(ne=>ne.id!==S)),I("Perspective deleted successfully!"),b("success")):(I("Failed to delete perspective: "+te.message),b("error"))}}catch(D){I("Error deleting perspective: "+D.message),b("error")}k(!0),Y()},a=Pe({initialValues:{perspectiveName:""},onSubmit:(S,{resetForm:D})=>{i!==null?w(S):A(S),D()}}),d=()=>{C(!0)},y=()=>{C(!1),a.resetForm(),f(null)},T=(S,D)=>{g(S.currentTarget),M(D)},Y=()=>{g(null),M(null)},ee=()=>{k(!1)},W=_e();return e.jsxs(E,{p:0,children:[e.jsx(V,{container:!0,spacing:3,children:e.jsxs(V,{item:!0,xs:12,children:[e.jsx(V,{item:!0,xs:12,p:2,style:{padding:"2px 2px 2px 25px"},children:e.jsx(H,{variant:"contained",color:"primary",onClick:()=>{a.resetForm(),f(!1),d()},children:"Create New Perspective"})}),e.jsx(pe,{children:t.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(fe,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No perspectives entered yet."})]}):e.jsx(Ee,{style:{border:"1px solid #ddd"},children:e.jsxs($e,{sx:{minWidth:650,borderCollapse:"collapse"},children:[e.jsx(we,{children:e.jsx(oe,{children:["Perspectives","Actions"].map(S=>e.jsx(G,{sx:{background:W.palette.grey[100],color:"#000",fontWeight:"bold",fontSize:"0.9rem",borderBottom:`2px solid ${W.palette.divider}`,position:"relative",padding:"12px 16px","&:not(:last-of-type)":{borderRight:`1px solid ${W.palette.divider}`}},children:S},S))})}),e.jsx(De,{children:t.map((S,D)=>e.jsxs(oe,{sx:{backgroundColor:W.palette.background.paper,borderRadius:2,"&:nth-of-type(odd)":{backgroundColor:W.palette.grey[50]},"&:hover":{backgroundColor:W.palette.grey[100]}},children:[e.jsx(G,{component:"th",scope:"row",sx:{display:"flex",alignItems:"center",border:0,padding:"12px 16px"},children:S.name}),e.jsxs(G,{sx:{border:0,padding:"12px 16px"},children:[e.jsx(ke,{color:"primary",onClick:J=>T(J,D),children:e.jsx(Fe,{})}),e.jsxs(Ae,{anchorEl:p,open:!!p&&v===D,onClose:y,children:[e.jsxs(X,{onClick:()=>N(D),children:[e.jsx(Te,{fontSize:"small"})," Edit"]}),e.jsxs(X,{onClick:()=>m(S.id),children:[e.jsx(Ie,{fontSize:"small"})," Delete"]})]})]})]},S.id))})]})})})]})}),e.jsxs(qe,{open:n,onClose:y,children:[e.jsx(Re,{children:i?"Edit Perspective":"Create New Perspective"}),e.jsx(Be,{children:e.jsxs(E,{component:"form",onSubmit:a.handleSubmit,children:[e.jsx(R,{autoFocus:!0,margin:"dense",id:"perspectiveName",name:"perspectiveName",label:"Perspective Name",type:"text",fullWidth:!0,value:a.values.perspectiveName,onChange:a.handleChange,error:a.touched.perspectiveName&&!!a.errors.perspectiveName,helperText:a.touched.perspectiveName&&a.errors.perspectiveName}),e.jsxs(Ue,{children:[e.jsx(H,{onClick:y,color:"primary",children:"Cancel"}),e.jsx(H,{type:"submit",color:"primary",children:i?"Update":"Save"})]})]})})]}),e.jsx(Wt,{open:$,autoHideDuration:6e3,onClose:ee,children:e.jsx(Lt,{onClose:ee,severity:q,sx:{width:"100%"},children:z})})]})}function ja(){const[t,s]=l.useState([]),[i,f]=l.useState(null),[n,C]=l.useState(!1),[$,k]=l.useState(null),[z,I]=l.useState(null),b=Ct().some(a=>a.permissions.some(d=>d.name==="create:endofdayactivity"));l.useEffect(()=>{p()},[]);const p=async()=>{try{const a=localStorage.getItem("token"),d=K.api+"evaluation-types",T=await(await fetch(d,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).json();T.success?s(T.data.data):u.error("Failed to fetch evaluation types")}catch{u.error("Error occurred while fetching evaluation types")}},g=Pe({initialValues:{name:"",description:""},onSubmit:async(a,{resetForm:d})=>{try{const y=i!==null?"PATCH":"POST",T=i!==null?`${O.API_URL_Units}/evaluation-types/${t[i].id}`:`${O.API_URL_Units}/evaluation-types`,Y=localStorage.getItem("token"),W=await(await fetch(T,{method:y,headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify(a)})).json();W.success?(u.success(i!==null?"Evaluation type updated":"Evaluation type created"),p(),N()):u.error(W.message||"Failed to save evaluation type")}catch{u.error("Error occurred while saving evaluation type")}d()}}),v=a=>{g.setFieldValue("name",t[a].name),g.setFieldValue("description",t[a].description||""),f(a),w()},M=async a=>{try{const d=localStorage.getItem("token"),T=await(await fetch(`${O.API_URL_Units}/evaluation-types/${t[a].id}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();T.success?(u.success("Evaluation type deleted"),p()):u.error(T.message||"Failed to delete evaluation type")}catch{u.error("Error occurred while deleting evaluation type")}},B=(a,d)=>{k(a.currentTarget),I(d)},A=()=>{k(null),I(null)},w=()=>{C(!0)},N=()=>{C(!1),g.resetForm(),f(null)},m=_e();return e.jsxs(E,{p:0,children:[e.jsx(V,{container:!0,spacing:3,children:e.jsxs(V,{item:!0,xs:12,children:[e.jsx(V,{item:!0,xs:12,p:2,style:{padding:"2px 2px 2px 25px"},children:e.jsx(Ot,{variant:"contained",color:"primary",onClick:w,children:"Add Evaluation Type"})}),e.jsx(pe,{children:t.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(fe,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No evaluation types entered yet."})]}):e.jsx(Ee,{style:{border:"1px solid #ddd"},children:e.jsxs($e,{sx:{minWidth:650,borderCollapse:"collapse"},children:[e.jsx(we,{children:e.jsx(oe,{children:["Evaluation Type","Description","Actions"].map(a=>e.jsx(G,{sx:{background:m.palette.grey[100],color:"#000",fontWeight:"bold",fontSize:"0.9rem",borderBottom:`2px solid ${m.palette.divider}`,position:"relative",padding:"12px 16px","&:not(:last-of-type)":{borderRight:`1px solid ${m.palette.divider}`}},children:a},a))})}),e.jsx(De,{children:t.map((a,d)=>e.jsxs(oe,{sx:{backgroundColor:m.palette.background.paper,borderRadius:2,"&:nth-of-type(odd)":{backgroundColor:m.palette.grey[50]},"&:hover":{backgroundColor:m.palette.grey[100]}},children:[e.jsx(G,{component:"th",scope:"row",sx:{display:"flex",alignItems:"center",border:0,padding:"12px 16px"},children:a.name}),e.jsx(G,{sx:{border:0,padding:"12px 16px"},children:a.description||"-"}),e.jsxs(G,{sx:{border:0,padding:"12px 16px"},children:[e.jsx(ke,{color:"primary",onClick:y=>B(y,d),children:e.jsx(Fe,{})}),e.jsxs(Ae,{anchorEl:$,open:!!$&&z===d,onClose:A,children:[e.jsxs(X,{onClick:()=>{v(d),A()},children:[e.jsx(Te,{fontSize:"small",disabled:!b})," Edit"]}),e.jsxs(X,{onClick:()=>{M(d),A()},children:[e.jsx(Ie,{fontSize:"small"})," Delete"]})]})]})]},a.id))})]})})})]})}),e.jsxs(qe,{open:n,onClose:N,children:[e.jsx(Re,{children:i!==null?"Edit Evaluation Type":"Create Evaluation Type"}),e.jsx(Be,{children:e.jsxs(E,{component:"form",onSubmit:g.handleSubmit,children:[e.jsx(R,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Evaluation Type Name",type:"text",fullWidth:!0,value:g.values.name,onChange:g.handleChange,error:g.touched.name&&!!g.errors.name,helperText:g.touched.name&&g.errors.name}),e.jsx(R,{margin:"dense",id:"description",name:"description",label:"Description",type:"text",fullWidth:!0,value:g.values.description,onChange:g.handleChange}),e.jsxs(Ue,{children:[e.jsx(H,{onClick:N,color:"primary",children:"Cancel"}),e.jsx(H,{type:"submit",color:"primary",children:i!==null?"Update":"Save"})]})]})})]}),e.jsx(He,{})]})}function ba(){const[t,s]=l.useState([]),[i,f]=l.useState(null),[n,C]=l.useState(!1),[$,k]=l.useState(null),[z,I]=l.useState(null),q=_e();l.useEffect(()=>{b()},[]);const b=async()=>{try{const a=localStorage.getItem("token"),y=await(await fetch(`${O.API_URL_Units}/frequencies`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).json();y.success?s(y.data.data):u.error("Failed to fetch frequencies")}catch{u.error("Error occurred while fetching frequencies")}},p=Pe({initialValues:{name:"",value:""},onSubmit:async(a,{resetForm:d})=>{try{const y=i!==null?"PATCH":"POST",T=i!==null?`${O.API_URL_Units}/frequencies/${t[i].id}`:`${O.API_URL_Units}/frequencies`,Y=localStorage.getItem("token"),W=await(await fetch(T,{method:y,headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify({name:a.name,value:a.value})})).json();W.success?(u.success(i!==null?"Frequency updated":"Frequency created"),b(),w()):u.error(W.message||"Failed to save frequency")}catch{u.error("Error occurred while saving frequency")}d()}}),g=a=>{p.setFieldValue("name",t[a].name),p.setFieldValue("value",t[a].value),f(a),A()},v=async a=>{try{const d=localStorage.getItem("token"),T=await(await fetch(`${O.API_URL_Units}/frequencies/${t[a].id}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).json();T.success?(u.success("Frequency deleted"),b()):u.error(T.message||"Failed to delete frequency")}catch{u.error("Error occurred while deleting frequency")}},M=(a,d)=>{k(a.currentTarget),I(d)},B=()=>{k(null),I(null)},A=()=>{C(!0)},w=()=>{C(!1),p.resetForm(),f(null)},m=Ct().some(a=>a.permissions.some(d=>d.name==="create:endofdayactivity"));return e.jsxs(E,{p:0,children:[e.jsx(V,{item:!0,xs:12,children:e.jsxs(Se,{children:[e.jsx(V,{item:!0,xs:12,style:{padding:"2px 2px 15px 3px"},children:e.jsx(H,{variant:"contained",color:"primary",onClick:A,children:"Add Frequency"})}),t.length===0?e.jsxs(E,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(fe,{color:"disabled",style:{fontSize:60}}),e.jsx(L,{variant:"subtitle1",color:"textSecondary",align:"center",marginLeft:2,children:"No frequencies registered yet."})]}):e.jsx(Ee,{variant:"outlined",sx:{border:"1px solid #ddd"},children:e.jsxs($e,{sx:{minWidth:650,borderCollapse:"collapse"},children:[e.jsx(we,{children:e.jsx(oe,{children:["Frequency Name","Value","Actions"].map(a=>e.jsx(G,{sx:{background:q.palette.grey[100],color:"#000",fontWeight:"bold",fontSize:"0.9rem",borderBottom:`2px solid ${q.palette.divider}`,position:"relative",padding:"12px 16px","&:not(:last-of-type)":{borderRight:`1px solid ${q.palette.divider}`}},children:a},a))})}),e.jsx(De,{children:t.map((a,d)=>e.jsxs(oe,{sx:{backgroundColor:q.palette.background.paper,borderRadius:2,"&:nth-of-type(odd)":{backgroundColor:q.palette.grey[50]},"&:hover":{backgroundColor:q.palette.grey[100]}},children:[e.jsx(G,{component:"th",scope:"row",sx:{display:"flex",alignItems:"center",border:0,padding:"12px 16px"},children:a.name}),e.jsx(G,{sx:{border:0,padding:"12px 16px"},children:a.value}),e.jsxs(G,{sx:{border:0,padding:"12px 16px"},children:[e.jsx(ke,{color:"primary",onClick:y=>M(y,d),children:e.jsx(Fe,{})}),e.jsxs(Ae,{anchorEl:$,open:!!$&&z===d,onClose:B,children:[e.jsxs(X,{onClick:()=>{g(d),B()},children:[e.jsx(Te,{fontSize:"small",disabled:!m})," Edit"]}),e.jsxs(X,{onClick:()=>{v(d),B()},children:[e.jsx(Ie,{fontSize:"small"})," Delete"]})]})]})]},a.id))})]})})]})}),e.jsxs(qe,{open:n,onClose:w,children:[e.jsx(Re,{children:i!==null?"Edit Frequency":"Create Frequency"}),e.jsx(Be,{children:e.jsxs(E,{component:"form",onSubmit:p.handleSubmit,children:[e.jsx(R,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Frequency Name",type:"text",fullWidth:!0,value:p.values.name,onChange:p.handleChange,error:p.touched.name&&!!p.errors.name,helperText:p.touched.name&&p.errors.name}),e.jsx(R,{margin:"dense",id:"value",name:"value",label:"Value",type:"number",fullWidth:!0,value:p.values.value,onChange:p.handleChange,error:p.touched.value&&!!p.errors.value,helperText:p.touched.value&&p.errors.value}),e.jsxs(Ue,{children:[e.jsx(H,{onClick:w,color:"primary",children:"Cancel"}),e.jsx(H,{onClick:p.handleSubmit,color:"primary",children:"Save"})]})]})})]}),e.jsx(He,{})]})}const va=Dt`
  50% {
    opacity: 0.5;
  }
`,Sa=ie(Pt)(({theme:t})=>({animation:`${va} 1s linear infinite`,padding:t.spacing(1)})),Ca=ie(zt)(({theme:t})=>({[`&.${ce.alternativeLabel}`]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)"},[`&.${ce.active}`]:{[`& .${ce.line}`]:{borderColor:"#784af4"}},[`&.${ce.completed}`]:{[`& .${ce.line}`]:{borderColor:"#784af4"}},[`& .${ce.line}`]:{borderColor:t.palette.mode==="dark"?t.palette.grey[800]:"#eaeaf0",borderTopWidth:3,borderRadius:1}})),Pa=ie("div")(({theme:t,ownerState:s})=>({color:t.palette.mode==="dark"?t.palette.grey[700]:"#eaeaf0",display:"flex",height:22,alignItems:"center",...s.active&&{color:"#784af4"},"& .QontoStepIcon-completedIcon":{color:"#784af4",zIndex:1,fontSize:18},"& .QontoStepIcon-circle":{width:8,height:8,borderRadius:"50%",backgroundColor:"currentColor"}}));function We(t){const{active:s,completed:i,className:f}=t;return e.jsx(Pa,{ownerState:{active:s},className:f,children:i?e.jsx(Ht,{className:"QontoStepIcon-completedIcon"}):e.jsx("div",{className:"QontoStepIcon-circle"})})}We.propTypes={active:Ne.bool,className:Ne.string,completed:Ne.bool};const h=["Fiscal Year","Planning Period","Frequency Period Value","Evaluation Period"];function _a(){var et,tt,at,nt,rt,st,ot,it,lt,ct,dt,ut,pt,ht,mt,xt,gt,ft,yt,jt;const[t,s]=l.useState(0),[i,f]=l.useState(!1),[n,C]=l.useState({}),[$,k]=l.useState([]),[z,I]=l.useState([]),[q,b]=l.useState(!1),[p,g]=l.useState(!1),[v,M]=l.useState([]),[B,A]=l.useState([]),[w,N]=l.useState(null),[m,a]=l.useState(null),[d,y]=l.useState([]),[T,Y]=l.useState([!1,!1,!1]),ee=o=>{I(r=>[...r,o])},W=o=>{k(r=>[...r,{...o,type:"Planning Period"}])},S=o=>{k(r=>[...r,{...o,type:"Frequency Period Value"}])},D=o=>{k(r=>[...r,{...o,type:"Evaluation Period"}])},J=o=>{s(o),o===0||T[o-1]?s(o):u.error("Please complete all required fields."),f(!0)},te=async()=>{if(ae()){const r=[...T];r[t]=!0,Y(r),s(c=>Math.min(c+1,h.length-1))}else u.error("Please complete all required fields.");if(h[t]==="Fiscal Year"){const r=await Ze();if(!r)return;N(r)}if(!(h[t]==="Planning Period"&&!await Ke())){if(h[t]==="Frequency Period Value"){const r=await je();if(!r)return;a(r)}t<h.length-1&&(s(r=>r+1),f(!0))}},ae=()=>{var o,r,c,x,j,F,_,U,P,le;switch(t){case 0:return((o=n["Fiscal Year"])==null?void 0:o.year)&&((r=n["Fiscal Year"])==null?void 0:r.startDate)&&((c=n["Fiscal Year"])==null?void 0:c.endDate);case 1:return((x=n["Planning Period"])==null?void 0:x.startDate)&&((j=n["Planning Period"])==null?void 0:j.endDate);case 2:return((F=n["Frequency Period Value"])==null?void 0:F.frequency)&&((U=(_=n["Frequency Period Value"])==null?void 0:_.dates)==null?void 0:U.every(Z=>Z.start_date&&Z.end_date));case 3:return((P=n["Evaluation Period"])==null?void 0:P.startDate)&&((le=n["Evaluation Period"])==null?void 0:le.endDate);default:return!1}},ne=async()=>{const o=h.reduce((c,x)=>(x!=="Frequency"&&x!=="Fiscal Year"&&(c[x]=n[x]||""),c),{});h[t]==="Fiscal Year"&&I(c=>[...c,{year:n["Fiscal Year"].year}]),h[t]==="Frequency Period Value"&&n[h[t]]&&(o["Frequency Period Value"]={...n[h[t]],frequency:n[h[t]].frequencyName});const r=n[h[t]]||"";A(c=>[...c,{step:h[t],data:r}]),n["Fiscal Year"]&&(o["Fiscal Year"]=n["Fiscal Year"]),h[t]==="Evaluation Period"&&await ye(),y(c=>{const x=[...c,o];return localStorage.setItem("savedData",JSON.stringify(x)),x}),C({}),s(0),f(!1)},Q=o=>{const{name:r,value:c,type:x}=o.target;C(x==="number"?j=>({...j,[h[t]]:{...j[h[t]],[r]:Number(c)}}):j=>({...j,[h[t]]:{...j[h[t]],[r]:c}}))},ye=async()=>{var U,P,le,Z;const o=localStorage.getItem("token"),r=`${K.api}${K.evaluation_periods}`,c={Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"},x=((U=n["Evaluation Period"])==null?void 0:U.frequency_period_value_id)||((P=n["Frequency Period Value"])==null?void 0:P.frequency)||"";if(!x){g(re=>({...re,parent_id:"Parent ID is invalid or missing"})),u.error("Parent ID is invalid or missing.");return}const j=(le=n["Evaluation Period"])==null?void 0:le.startDate,F=(Z=n["Evaluation Period"])==null?void 0:Z.endDate;if(!j||!F){g(re=>({...re,start_date:"Start date is required",end_date:"End date is required"})),u.error("Start date and End date are required.");return}const _={fiscal_year_id:w.id||"",dates:[{parent_id:x,start_date:j,end_date:F}]};try{b(!0),g({});const re=await fetch(r,{method:"POST",headers:c,body:JSON.stringify(_)}),he=await re.json();if(re.ok)return u.success("Evaluation period created successfully"),D(he.data),he.data;console.error("Backend errors:",he.data.errors),u.error(`Evaluation period submission failed: ${he.message}`),g(he.data.errors||{})}catch(re){u.error("An error occurred while submitting evaluation period"),console.error("An error occurred while submitting evaluation period:",re)}finally{b(!1)}},je=async()=>{var j,F,_;const o=localStorage.getItem("token"),r=`${K.api}${K.frequency_period_values}`,c={Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"},x={frequency_id:((j=n["Frequency Period Value"])==null?void 0:j.frequency)||"",fiscal_year_id:((F=n["Frequency Period Value"])==null?void 0:F.fiscal_year_id)||(w==null?void 0:w.id)||"",dates:((_=n["Frequency Period Value"])==null?void 0:_.dates)||[]};if(x.dates.length===0||x.dates.some(U=>!U.start_date||!U.end_date)){u.error("Please fill in all start and end dates.");return}try{b(!0),g({});const P=await(await fetch(r,{method:"POST",headers:c,body:JSON.stringify(x)})).json();if(P.success)return u.success("Frequency period value created successfully"),S(P.data),P.data;if(P.status===422){const{message:le,errors:Z}=P.data;Z&&Z.frequency_id?u.error(Z.frequency_id[0]||"Frequency ID error"):u.error(le||"Frequency period value submission failed"),g(Z||{})}else u.error(`Frequency period value submission failed: ${P.message}`)}catch(U){u.error("An error occurred while submitting the frequency period value"),console.error("An error occurred while submitting the frequency period value:",U)}finally{b(!1)}},Ze=async()=>{var j,F,_;const o=localStorage.getItem("token"),r=`${K.api}${K.fiscal_years}`,c={Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"},x={year:((j=n["Fiscal Year"])==null?void 0:j.year)||"",start_date:((F=n["Fiscal Year"])==null?void 0:F.startDate)||"",end_date:((_=n["Fiscal Year"])==null?void 0:_.endDate)||""};try{b(!0),g({});const P=await(await fetch(r,{method:"POST",headers:c,body:JSON.stringify(x)})).json();if(P.success)return u.success("Fiscal year created successfully"),ee(P.data),P.data;u.error(`Fiscal year submission failed: ${P.message}`),P.data.message.includes("The end date must be at least 360 days after the start date")?(u.error("The end date must be at least 360 days after the start date."),g({end_date:[P.data.message]})):g(P.data.errors||{})}catch(U){u.error("An error occurred while submitting fiscal year"),console.error("An error occurred while submitting fiscal year:",U)}finally{b(!1)}},Ke=async()=>{var j,F,_;const o=localStorage.getItem("token"),r=`${K.api}${K.planning_periods}`,c={Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"},x={fiscal_year_id:w.id,start_date:((j=n["Planning Period"])==null?void 0:j.startDate)||"",end_date:((F=n["Planning Period"])==null?void 0:F.endDate)||""};try{b(!0),g({});const P=await(await fetch(r,{method:"POST",headers:c,body:JSON.stringify(x)})).json();if(P.success)return u.success("Planning period created successfully"),W(P.data),P.data;u.error(`Planning period submission failed: ${P.message}`),P.status===422&&((_=P.data)==null?void 0:_.message)==="Start and End dates must be within the fiscal year range."?(g({start_date:["Start date must be within the fiscal year range."],end_date:["End date must be within the fiscal year range."]}),u.error("Start and End dates must be within the fiscal year range.")):g(P.data.errors||{})}catch(U){u.error("An error occurred while submitting the planning period."),console.error("An error occurred while submitting the planning period:",U)}finally{b(!1)}},kt=async()=>{const o=localStorage.getItem("token"),r=`${O.API_URL_Units}/frequencies`,c={Authorization:`Bearer ${o}`,Accept:"application/json","Content-Type":"application/json"};try{b(!0),g({});const j=await(await fetch(r,{method:"GET",headers:c})).json();j.success?M(j.data.data):(u.error(`Failed to fetch frequencies: ${j.message}`),g(j.errors||{}))}catch(x){u.error("An error occurred while fetching frequencies"),console.error("An error occurred while fetching frequencies:",x)}finally{b(!1)}};l.useEffect(()=>{kt()},[]),l.useEffect(()=>{const o=localStorage.getItem("savedData");o&&y(JSON.parse(o))},[]);const be=async o=>{o.preventDefault(),h[t]==="Fiscal Year"?await Ze():h[t]==="Planning Period"?await Ke():h[t]==="Frequency Period Value"?await je():h[t]==="Evaluation Period"&&await ye()},At=o=>{const r=o.target.value,c=v.find(_=>_.id===r),x=(c==null?void 0:c.name)||"",j=(c==null?void 0:c.value)||1,F=Array.from({length:j},()=>({start_date:"",end_date:""}));C(_=>({..._,[h[t]]:{..._[h[t]]||{},frequency:r,frequencyName:x,dates:F}}))},Xe=(o,r,c)=>{const{value:x}=o.target;console.log(`Updating ${c} for period ${r} with value: ${x}`),C(j=>{const F=j[h[t]]||{dates:[]},_=[...F.dates];return _[r]||(_[r]={start_date:"",end_date:""}),c==="start_date"?_[r].start_date=x:c==="end_date"&&(_[r].end_date=x),{...j,[h[t]]:{...F,dates:_}}})},Tt=()=>{f(!1)};return e.jsxs(Ve,{sx:{width:"100%"},spacing:4,children:[e.jsx(Yt,{alternativeLabel:!0,activeStep:t,connector:e.jsx(Ca,{}),spacing:4,children:h.map((o,r)=>e.jsx(Gt,{onClick:()=>J(r),children:r===0&&$.length===0?e.jsx(Sa,{StepIconComponent:We,children:o}):e.jsx(Pt,{StepIconComponent:We,children:o})},o))}),e.jsx(qt,{open:i,onClose:Tt,children:e.jsx(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:e.jsx(Se,{variant:"outlined",children:e.jsxs(pe,{children:[e.jsx(L,{variant:"h6",component:"div",children:h[t]}),h[t]==="Fiscal Year"?e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:be,children:[e.jsx(R,{name:"year",label:"Year",value:((et=n[h[t]])==null?void 0:et.year)||"",onChange:Q,fullWidth:!0,margin:"normal",error:!!p.year,helperText:(tt=p.year)==null?void 0:tt.join(", ")}),e.jsx(R,{name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:((at=n[h[t]])==null?void 0:at.startDate)||"",onChange:Q,fullWidth:!0,margin:"normal",error:!!p.start_date,helperText:(nt=p.start_date)==null?void 0:nt.join(", ")}),e.jsx(R,{name:"endDate",label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:((rt=n[h[t]])==null?void 0:rt.endDate)||"",onChange:Q,fullWidth:!0,margin:"normal",error:!!p.end_date,helperText:(st=p.end_date)==null?void 0:st.join(", ")})]})}):h[t]==="Planning Period"?e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:be,children:[e.jsx(R,{name:"fiscal_year_id",label:"Fiscal Year",value:((ot=n["Fiscal Year"])==null?void 0:ot.year)||"",InputProps:{readOnly:!0},fullWidth:!0,margin:"normal"}),e.jsx(R,{name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:((it=n[h[t]])==null?void 0:it.startDate)||"",onChange:Q,fullWidth:!0,margin:"normal",error:!!p.start_date,helperText:(lt=p.start_date)==null?void 0:lt.join(", ")}),e.jsx(R,{name:"endDate",label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:((ct=n[h[t]])==null?void 0:ct.endDate)||"",onChange:Q,fullWidth:!0,margin:"normal",error:!!p.end_date,helperText:(dt=p.end_date)==null?void 0:dt.join(", ")})]})})}):h[t]==="Frequency Period Value"?e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsx(E,{sx:{mb:0,maxHeight:"50vh",overflowY:"auto"},children:e.jsxs("form",{onSubmit:be,children:[e.jsx(R,{name:"fiscal_year_id",label:"Fiscal Year",value:((ut=n["Fiscal Year"])==null?void 0:ut.year)||"",InputProps:{readOnly:!0},fullWidth:!0,margin:"normal"}),e.jsxs(Rt,{fullWidth:!0,margin:"normal",sx:{mb:2},children:[e.jsx(Bt,{id:"frequency-label",children:"Select Frequency"}),e.jsx(Ut,{name:"frequency",value:((pt=n[h[t]])==null?void 0:pt.frequency)||"",onChange:At,fullWidth:!0,margin:"normal",label:"Select Frequency",sx:{mb:2},children:v.map(o=>e.jsx(X,{value:o.id,children:o.name},o.id))})]}),e.jsx(e.Fragment,{children:(mt=(ht=n[h[t]])==null?void 0:ht.dates)==null?void 0:mt.map((o,r)=>{var c;return e.jsxs(V,{container:!0,spacing:2,sx:{mb:2,maxHeight:"80vh",overflowY:"auto"},children:[e.jsx(V,{item:!0,xs:6,children:e.jsx(R,{name:`start_date_${r}`,label:`Start Date ${r+1}`,type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:o.start_date||"",onChange:x=>Xe(x,r,"start_date")})}),e.jsx(V,{item:!0,xs:6,children:e.jsx(R,{name:`end_date_${r}`,label:`End Date ${r+1}`,type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:o.end_date||"",onChange:x=>Xe(x,r,"end_date"),error:!!p.end_date,helperText:(c=p.end_date)==null?void 0:c.join(", ")})})]},r)})})]})})})}):h[t]==="Evaluation Period"?e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:be,children:[e.jsx(R,{name:"fiscal_year_id",label:"Fiscal Year",value:((xt=n["Fiscal Year"])==null?void 0:xt.year)||"",InputProps:{readOnly:!0},fullWidth:!0,margin:"normal"}),e.jsx(R,{name:"frequency_name",value:((gt=v.find(o=>{var r,c;return o.id===(((r=n[h[t]])==null?void 0:r.frequency_period_value_id)||((c=n["Frequency Period Value"])==null?void 0:c.frequency))}))==null?void 0:gt.name)||"",InputProps:{readOnly:!0},fullWidth:!0,margin:"normal",error:!!p.frequency_period_value_id,helperText:(ft=p.frequency_period_value_id)==null?void 0:ft.join(", "),sx:{mb:2}}),e.jsx(R,{name:"startDate",label:"Start Date",type:"date",InputLabelProps:{shrink:!0},value:((yt=n[h[t]])==null?void 0:yt.startDate)||"",onChange:Q,fullWidth:!0,margin:"normal"}),e.jsx(R,{name:"endDate",label:"End Date",type:"date",InputLabelProps:{shrink:!0},value:((jt=n[h[t]])==null?void 0:jt.endDate)||"",onChange:Q,fullWidth:!0,margin:"normal"})]})})})}):null,e.jsxs(Ve,{direction:"row",spacing:2,sx:{mt:2},children:[t<h.length-1&&e.jsx(H,{variant:"contained",color:"primary",type:"submit",onClick:te,children:"Next"}),t===h.length-1&&e.jsx(H,{variant:"contained",color:"primary",onClick:ne,children:"Save"})]})]})})})}),e.jsx(Se,{children:e.jsx(pe,{children:d.length===0?e.jsx(Jt,{severity:"info",title:"No Data Available",description:"There is no data available to display.",sx:{paddingTop:6}}):d.map((o,r)=>e.jsx(Se,{variant:"outlined",sx:{margin:5,borderRadius:4,boxShadow:"0 10px 15px rgba(0,0,0,0.10)",padding:3},children:e.jsx(pe,{children:e.jsxs(E,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[o["Fiscal Year"]&&e.jsx(l.Fragment,{children:e.jsxs(E,{display:"flex",flexDirection:"column",alignItems:"flex-start",flexGrow:1,children:[e.jsxs(E,{display:"flex",alignItems:"center",children:[e.jsx(ha,{sx:{marginRight:1,color:"#3f51b5"}}),e.jsx(L,{variant:"h4",marginBottom:1,marginTop:1,color:"primary",children:"Fiscal Year"})]}),Object.entries(o["Fiscal Year"]).map(([c,x])=>e.jsxs(L,{variant:"body1",color:"textSecondary",sx:{padding:"2px 0"},children:[e.jsxs("strong",{children:[c.replace(/([A-Z])/g," $1").trim(),":"]})," ",x]},c))]})},"Fiscal Year"),Object.entries(o).map(([c,x])=>c!=="Fiscal Year"?e.jsx(l.Fragment,{children:e.jsxs(E,{display:"flex",flexDirection:"column",alignItems:"flex-start",flexGrow:1,children:[e.jsxs(E,{display:"flex",alignItems:"center",children:[e.jsx(ma,{sx:{marginRight:1,color:"#ff5722"}}),e.jsx(L,{variant:"h4",marginBottom:1,marginTop:1,color:"secondary",children:c.replace(/([A-Z])/g," $1").trim()})]}),Object.entries(x).map(([j,F])=>j!=="frequency"&&e.jsxs(L,{variant:"body1",color:"textSecondary",sx:{padding:"2px 0"},children:[e.jsxs("strong",{children:[j.replace(/([A-Z])/g," $1").trim(),":"]})," ",Array.isArray(F)?F.map((_,U)=>e.jsxs(E,{sx:{paddingLeft:2},children:[e.jsxs(L,{children:[e.jsx("strong",{children:"Start Date:"})," ",_.start_date]}),e.jsxs(L,{children:[e.jsx("strong",{children:"End Date:"})," ",_.end_date]})]},U)):F]},j))]})},c):null)]})})},r))})})]})}var Qe={},ka=St;Object.defineProperty(Qe,"__esModule",{value:!0});var de=Qe.default=void 0,Aa=ka(vt()),Ta=e;de=Qe.default=(0,Aa.default)((0,Ta.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");function za(){const[t,s]=Nt.useState(!1),i=f=>(n,C)=>{s(C?f:!1)};return e.jsx(Mt,{maxWidth:"lg",title:"Basic Configurations",children:e.jsx(Vt,{sx:{marginLeft:"10px",padding:"50px",marginTop:"20px"},children:e.jsxs(V,{container:!0,spacing:3,children:[e.jsx(V,{item:!0,xs:12,children:e.jsx(Ve,{sx:{width:"80%",paddingTop:"0px",marginLeft:"20px"},spacing:2,children:e.jsxs(E,{sx:{padding:"10px"},children:[e.jsxs(me,{expanded:t==="panel1",onChange:i("panel1"),style:{padding:"5px",marginBottom:"10px"},children:[e.jsx(ge,{expandIcon:e.jsx(de,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:e.jsx(L,{sx:{fontWeight:"bold"},children:"Frequency"})}),e.jsx(xe,{children:e.jsx(ba,{})})]}),e.jsxs(me,{expanded:t==="panel2",onChange:i("panel2"),style:{padding:"5px",marginBottom:"10px"},children:[e.jsx(ge,{expandIcon:e.jsx(de,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:e.jsx(L,{sx:{fontWeight:"bold"},children:"Period"})}),e.jsx(xe,{children:e.jsx(_a,{})})]}),e.jsxs(me,{expanded:t==="panel3",onChange:i("panel3"),style:{padding:"5px",marginBottom:"10px"},children:[e.jsx(ge,{expandIcon:e.jsx(de,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:e.jsx(L,{sx:{fontWeight:"bold"},children:"Measuring"})}),e.jsx(xe,{children:e.jsx(fa,{})})]}),e.jsxs(me,{expanded:t==="panel4",onChange:i("panel4"),style:{padding:"5px",marginBottom:"10px"},children:[e.jsx(ge,{expandIcon:e.jsx(de,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:e.jsx(L,{sx:{fontWeight:"bold"},children:"Perspective"})}),e.jsx(xe,{children:e.jsx(ya,{})})]}),e.jsxs(me,{expanded:t==="panel5",onChange:i("panel5"),style:{padding:"5px",marginBottom:"10px"},children:[e.jsx(ge,{expandIcon:e.jsx(de,{}),"aria-controls":"panel3bh-content",id:"panel3bh-header",children:e.jsx(L,{sx:{fontWeight:"bold"},children:"Evaluation Type"})}),e.jsx(xe,{children:e.jsx(ja,{})})]})]})})}),e.jsx(V,{item:!0,xs:12,children:e.jsx(E,{sx:{padding:" 1px"}})})]})})})}export{za as default};
