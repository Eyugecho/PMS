import{c as O,j as e,L as oe,A as de,G as n,g as I,D as q,T as V,B as S,r as l,F as Z,u as M,e as K,a as v,b as r,d as k,s as X,f as R,h as T,i as N,k as B,l as $,m as s,P as G,n as W,R as P,I as z,o as xe,p as he,q as me,t as pe,v as je,w as ge,x as J,y as D,z as fe,C as ue,E as ye,H as ve,J as be}from"./index-DL-CLDEe.js";import{S as ee}from"./SelectorMenu-i2G5QBs3.js";import{_ as Ce,T as Ie}from"./index-BodqEeT3.js";import{P as we}from"./PlanTable-DGecXshL.js";import{I as te}from"./IconTargetArrow-D7GkijEa.js";import{P as ke}from"./PerformanceCard-BGBIJSie.js";import{P as Te}from"./PerKPI-fCT4UCeN.js";import{D as Y}from"./DrogaDonutChart-gWJPFz3l.js";import{I as se}from"./IconCheck-CNbuIUUk.js";import{I as Se}from"./IconBuilding-BouCvSUT.js";import"./CreateTask-DTItplYo.js";import"./KeyboardArrowUp-C1VMsA8Z.js";var A=O("arrows-diagonal","IconArrowsDiagonal",[["path",{d:"M16 4l4 0l0 4",key:"svg-0"}],["path",{d:"M14 10l6 -6",key:"svg-1"}],["path",{d:"M8 20l-4 0l0 -4",key:"svg-2"}],["path",{d:"M4 20l6 -6",key:"svg-3"}]]),ze=O("lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]),Le=O("notification","IconNotification",[["path",{d:"M10 6h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3",key:"svg-0"}],["path",{d:"M17 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]]),ne=O("users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]);const re=({startDate:t,setStartDate:a,endDate:c,setEndDate:m})=>{const p=x=>{a(x),x&&c&&x>=c&&m(null)},u=x=>{x&&t&&x<=t?S.error("End date must be at least one day after the start date."):m(x)};return e.jsx(oe,{dateAdapter:de,children:e.jsxs(n,{container:!0,sx:{display:"flex",justifyContent:"flex-end"},spacing:I,children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(q,{label:"Start Date",value:t,onChange:p,renderInput:x=>e.jsx(V,{...x,sx:{width:"auto",minWidth:"50px"},error:!!(c&&t&&c<t),helperText:c&&t&&c<t?"End date must be later than start date":""})})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(q,{label:"End Date",value:c,onChange:u,minDate:t?new Date(t.getTime()+864e5):null,renderInput:x=>e.jsx(V,{...x,sx:{width:"auto",minWidth:"50px"},error:!!(c&&t&&c<t),helperText:c&&t&&c<t?"End date must be later than start date":""})})})]})})},Pe={done:"#008000",pending:"#FFA500",cancelled:"#ff8c8c",inprogress:"#0000FF",blocked:"#A020F0"},Q=t=>Pe[t.toLowerCase()]||"gray",ie=({data:t,type:a})=>{const c=j=>!j||j.length===0?["pending","inprogress","done","blocked","cancelled"].map(h=>({name:h,data:[0],color:Q(h)})):["pending","inprogress","done","blocked","cancelled"].map(h=>({name:h,data:j.map(i=>{const o=i.statuses.find(y=>y.status===h);return o?parseInt(o.task_count):0}),color:Q(h)})),m=j=>j&&j.length>0?j.map(h=>h.date):["No Data"],p=(j,h)=>({chart:{type:j,height:380,stacked:j==="line",toolbar:{show:!1}},xaxis:{categories:m(h),labels:{formatter:i=>i}},title:{text:""},tooltip:{x:{formatter:i=>i}},colors:c(h).map(i=>i.color)}),[u,x]=l.useState({series:c(t),options:p(a,t)});return l.useEffect(()=>{x({series:c(t),options:p(a,t)})},[t,a]),e.jsx("div",{children:t&&t.length>0?e.jsx(Ce,{options:u.options,series:u.series,type:a,height:380}):e.jsx(Z,{severity:"activities",title:"No Activity Data Found",description:"There is no data available to display in the graph.",sx:{paddingTop:6},size:100})})},Ae=[{label:"Line Graph",value:"line"},{label:"Area Graph",value:"area"},{label:"Bar Chart",value:"bar"}],Ee=()=>{const t=M(b=>b.customization.selectedFiscalYear),a=()=>X(new Date,{weekStartsOn:1}),[c,m]=l.useState(a()),[p,u]=l.useState(K(new Date)),[x,j]=l.useState("line"),[h,i]=l.useState(!0),[o,y]=l.useState([]),f=b=>{const w=b.target.value;j(w)},d=async()=>{if(t){i(!0);const b=await R(),w=T.api+T.myTaskGraph+`?fiscal_year_id=${t==null?void 0:t.id}&start_date=${N(c,"yyyy-MM-dd")}&end_date=${N(p,"yyyy-MM-dd")}`,E={Authorization:`Bearer ${b}`,accept:"application/json","Content-Type":"application/json"};fetch(w,{method:"GET",headers:E}).then(g=>g.json()).then(g=>{g.success?y(g.data):S.warning(g.message)}).catch(g=>{S.warning(g.message)}).finally(()=>{i(!1)})}else return e.jsx(B,{})};return l.useEffect(()=>{p<c&&u(K(c))},[c]),l.useEffect(()=>{d()},[t,c,p]),e.jsx(n,{item:!0,xs:11.9,children:e.jsxs(n,{container:!0,spacing:I,children:[e.jsx(n,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsxs(v,{children:[e.jsxs(n,{container:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(n,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:[e.jsx(r,{variant:"h4",children:"Daily Activities"}),e.jsx(ee,{name:"chart",options:Ae,selected:x,handleSelection:f})]}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:e.jsx(re,{startDate:c,setStartDate:m,endDate:p,setEndDate:u})})]}),h?e.jsx(n,{container:!0,children:e.jsx(n,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:4},children:e.jsx(k,{size:20})})}):x&&e.jsx(ie,{data:o,type:x})]})}),e.jsx(n,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsx(Ie,{hideChart:!0,hideCreate:!1,hideFilter:!0,onRefresh:()=>d()})})]})})},Fe=()=>{const t=M(h=>h.customization.selectedFiscalYear),a=$(),[c,m]=l.useState(!1),[p,u]=l.useState([]),[x,j]=l.useState(!1);return l.useEffect(()=>{(async()=>{m(!0);const i=await R(),o=T.api+T.getMyPlans+`?fiscal_year_id=${t==null?void 0:t.id}`,y={Authorization:`Bearer ${i}`,accept:"application/json","Content-Type":"application/json"};fetch(o,{method:"GET",headers:y}).then(f=>f.json()).then(f=>{f.success?(u(f.data.plans.data),j(!1)):(j(!1),S.warning(f.message))}).catch(f=>{S.warning(f.message),j(!0)}).finally(()=>{m(!1)})})()},[]),e.jsx(n,{item:!0,xs:11.9,children:e.jsx(n,{container:!0,spacing:I,children:e.jsx(n,{item:!0,xs:12,children:e.jsxs(v,{children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:1,paddingLeft:2},children:e.jsx(r,{variant:"h4",children:"Assigned KPI and Targets"})}),e.jsx(s,{children:c?e.jsx(s,{sx:{padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):x?e.jsx(s,{sx:{padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(r,{variant:"body2",children:"There is error fetching the assigned kpi's"})}):p.length===0?e.jsxs(s,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(te,{size:80,color:a.palette.grey[400]}),e.jsx(r,{variant:"h4",sx:{marginTop:1.6},children:"Target not found"}),e.jsx(r,{variant:"caption",children:"The list of assigned target will be listed here"})]}):e.jsx(we,{plans:p,page:"employee"})})]})})})})},ae=({isLoading:t,performance:a})=>e.jsxs(v,{sx:{mt:2},children:[e.jsx(r,{variant:"h4",children:"Per KPI performance"}),e.jsx(Te,{isLoading:t,performance:a})]});ae.propTypes={isLoading:G.bool,performance:G.array};const Me=()=>{const t=M(i=>i.customization.selectedFiscalYear),a=$(),[c,m]=l.useState(!1),[p,u]=l.useState([]),[x,j]=l.useState([]),h=i=>{j([p[i]])};return l.useEffect(()=>{(async()=>{if(t){m(!0);const o=await R(),y=T.api+T.myPerformance+`?fiscal_year_id=${t==null?void 0:t.id}`,f={Authorization:`Bearer ${o}`,accept:"application/json","Content-Type":"application/json"};fetch(y,{method:"GET",headers:f}).then(d=>d.json()).then(d=>{d.success&&u(d.data.performance)}).catch(d=>{S.warning(d.message)}).finally(()=>{m(!1)})}else return e.jsx(B,{})})()},[t]),e.jsx(n,{item:!0,xs:11.9,children:e.jsx(n,{container:!0,spacing:I,children:e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(v,{sx:{mt:2},children:[e.jsx(r,{variant:"h4",children:"Performance"}),e.jsx(n,{container:!0,children:e.jsx(n,{item:!0,xs:12,children:c?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:2},children:e.jsx(k,{size:20})}):p.length>0?e.jsx(n,{container:!0,sx:{marginTop:2,borderTop:.8,borderColor:a.palette.divider,padding:1},children:e.jsx(n,{item:!0,xs:12,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:p==null?void 0:p.map((i,o)=>{var w;const y=Object.keys(i)[0],[f,d]=y.match(/[a-zA-Z]+|[0-9]+/g),b=`${f} ${d}`;return e.jsx(ke,{isEvaluated:i[y].is_evaluated,performance:(w=i[y])==null?void 0:w.overall,frequency:b,onPress:()=>h(o)},o)})})}):e.jsx(Z,{severity:"performance",title:"No performance report",description:"The performance will be listed here",sx:{paddingTop:2}})})})]}),x.length>0&&e.jsx(ae,{isLoading:c,performance:x})]})})})},De=()=>e.jsx(W,{title:"Home",children:e.jsx(n,{container:!0,spacing:I,sx:{margin:1},children:e.jsx(n,{item:!0,xs:12,children:e.jsxs(n,{container:!0,spacing:I,children:[e.jsx(Ee,{}),e.jsx(Fe,{}),e.jsx(Me,{})]})})})}),F=({title:t,description:a,time:c})=>{const m=$();return e.jsxs(v,{sx:{display:"flex",alignItems:"center",marginY:1},children:[e.jsx(s,{sx:{width:40,height:40,borderRadius:20,backgroundColor:m.palette.grey[50],display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Le,{size:"1.2rem",stroke:"1.6"})}),e.jsxs(s,{sx:{width:"87%",display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:2},children:[e.jsxs(s,{sx:{width:"80%"},children:[e.jsx(r,{variant:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Sales unit is has new plan"}),e.jsx(r,{variant:"body2",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Revenue growth KPI, weighted 70%, and targettted, 400 Million in revenue"})]}),e.jsx(r,{variant:"body2",children:"23 min ago"})]})]})};F.propTypes={title:G.string,description:G.string,time:G.string};const Re=[{label:"Line Graph",value:"line"},{label:"Area Graph",value:"area"},{label:"Bar Chart",value:"bar"}],U=()=>{const t=$(),a=M(L=>L.customization.selectedFiscalYear),c=()=>X(new Date,{weekStartsOn:1}),[m,p]=l.useState(c()),[u,x]=l.useState(K(new Date)),[j,h]=l.useState(!0),[i,o]=l.useState([]),[y,f]=l.useState(!0),[d,b]=l.useState([]),[w,E]=l.useState("line"),g=L=>{const _=L.target.value;E(_)},le=async()=>{if(a){h(!0);const L=await R(),_=T.api+T.employeesTaskGraph+`?fiscal_year_id=${a==null?void 0:a.id}&start_date=${N(m,"yyyy-MM-dd")}&end_date=${N(u,"yyyy-MM-dd")}`,H={Authorization:`Bearer ${L}`,accept:"application/json","Content-Type":"application/json"};fetch(_,{method:"GET",headers:H}).then(C=>C.json()).then(C=>{C.success?o(C.data):S.warning(C.message)}).catch(C=>{S.warning(C.message)}).finally(()=>{h(!1)})}else return e.jsx(B,{})},ce=async()=>{if(a){f(!0);const L=await R(),_=T.api+T.getStats,H={Authorization:`Bearer ${L}`,accept:"application/json","Content-Type":"application/json"};fetch(_,{method:"GET",headers:H}).then(C=>C.json()).then(C=>{C.success?b(C.data):S.warning(C.message)}).catch(C=>{S.warning(C.message)}).finally(()=>{f(!1)})}else return e.jsx(B,{})};return l.useEffect(()=>{u<m&&x(K(m))},[m]),l.useEffect(()=>{ce()},[a]),l.useEffect(()=>{le()},[a,m,u]),e.jsx(W,{title:"Dashboard",children:e.jsx(n,{container:!0,spacing:I,sx:{margin:1},children:e.jsxs(n,{item:!0,xs:11.6,children:[e.jsxs(n,{container:!0,spacing:I,sx:{display:"flex",alignItems:"center"},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:y?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:t.palette.primary[800],padding:1,":hover":{backgroundColor:t.palette.primary[800]}},children:e.jsx(xe,{size:"1.4rem",stroke:"1.8",color:"white"})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:t.palette.primary[800],children:d==null?void 0:d.kpis}),e.jsx(r,{variant:"subtitle1",color:t.palette.primary[800],sx:{marginLeft:.6},children:"KPI's"})]}),e.jsxs(r,{variant:"subtitle1",color:t.palette.text.primary,children:[d==null?void 0:d.perspectiveTypes," Perspectives"]})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:y?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:"green",padding:1,":hover":{backgroundColor:"green"}},children:e.jsx(se,{size:"1.4rem",stroke:"1.8",color:"white"})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"green",children:d==null?void 0:d.used_kpis}),e.jsx(r,{variant:"subtitle1",color:"green",sx:{marginLeft:.6},children:"Planned KPI's"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"KPI Used this year"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:y?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:"#8000ff",padding:1,":hover":{backgroundColor:"#8000ff"}},children:e.jsx(Se,{size:"1.4rem",stroke:"1.8",style:{color:"#fff"}})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"#8000ff",children:d==null?void 0:d.units}),e.jsx(r,{variant:"subtitle1",color:"#8000ff",sx:{marginLeft:.6},children:"Units"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:y?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:"#cc5d02",padding:1,":hover":{backgroundColor:"#cc5d02"}},children:e.jsx(ne,{size:"1.4rem",stroke:"1.8",style:{color:"#fff"}})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"#cc5d02",children:d==null?void 0:d.employees}),e.jsx(r,{variant:"subtitle1",color:"#cc5d02",sx:{marginLeft:.6},children:"Employees"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})})]}),e.jsx(n,{container:!0,spacing:I,marginY:2,sx:{minHeight:200},children:e.jsxs(n,{item:!0,xs:12,children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(s,{children:[e.jsx(r,{variant:"h4",children:"Daily Activities"}),e.jsx(ee,{name:"chart",options:Re,selected:w,handleSelection:g})]}),e.jsx(re,{startDate:m,setStartDate:p,endDate:u,setEndDate:x})]}),j?e.jsx(n,{container:!0,children:e.jsx(n,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:4},children:e.jsx(k,{size:20})})}):w&&e.jsx(ie,{data:i,type:w})]})}),e.jsxs(n,{container:!0,spacing:I,marginTop:1,children:[e.jsx(n,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsxs(v,{sx:{minHeight:280,paddingY:1},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"h4",children:"Company performance"}),e.jsx(z,{children:e.jsx(he,{size:"1.2rem",stroke:"1.8"})})]}),e.jsxs(n,{container:!0,spacing:I,children:[e.jsxs(n,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:4},children:[e.jsx(Y,{value:85,size:60}),e.jsx(r,{variant:"subtitle1",marginTop:1.6,color:t.palette.text.primary,children:"Average Performance"})]}),e.jsxs(n,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,sx:{marginTop:2,borderLeft:1,borderColor:t.palette.divider},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",marginTop:1},children:[e.jsx(Y,{value:96,size:24}),e.jsxs(s,{sx:{marginLeft:1.8},children:[e.jsx(r,{variant:"h4",children:"Marketting"}),e.jsx(r,{variant:"body2",children:"Average performance"})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",marginY:2},children:[e.jsx(Y,{value:88,size:24}),e.jsxs(s,{sx:{marginLeft:1.8},children:[e.jsx(r,{variant:"h4",children:"Sales"}),e.jsx(r,{variant:"body2",children:"Average performance"})]})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",marginY:1},children:[e.jsx(Y,{value:86,size:24}),e.jsxs(s,{sx:{marginLeft:1.8,width:"70%"},children:[e.jsx(r,{variant:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Subpply Chain management"}),e.jsx(r,{variant:"body2",children:"Average performance"})]})]})]})]})]})}),e.jsx(n,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6,children:e.jsxs(v,{sx:{minHeight:280,paddingY:1},children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:.8},children:e.jsx(r,{variant:"h4",children:"Recent Notifications"})}),e.jsx(F,{}),e.jsx(F,{}),e.jsx(F,{})]})})]})]})})})},$e=({assigneperm:t})=>{M(i=>i.customization.selectedFiscalYear);const a=$(),[c,m]=l.useState(!1),[p,u]=l.useState(!1),[x,j]=l.useState({}),h=i=>{j(o=>({...o,[i]:!o[i]}))};return e.jsx(n,{item:!0,xs:12,children:e.jsxs(n,{container:!0,spacing:I,children:[e.jsx(n,{item:!0,xs:8,children:e.jsx(v,{children:e.jsx(s,{children:c?e.jsx(s,{sx:{padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):p?e.jsx(s,{sx:{padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(r,{variant:"body2",children:"There is an error fetching the assigned Permissions"})}):t.length===0?e.jsxs(s,{sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(te,{size:80,color:a.palette.grey[400]}),e.jsx(r,{variant:"h4",sx:{marginTop:1.6},children:"Role not found"}),e.jsx(r,{variant:"caption",children:"The list of assigned permissions will be listed here"})]}):e.jsx(me,{component:pe,sx:{minHeight:"22dvh"},children:e.jsxs(je,{sx:{minWidth:450},"aria-label":"unit plan table",children:[e.jsx(ge,{children:e.jsxs(J,{children:[e.jsx(D,{sx:{backgroundColor:a.palette.primary.main,color:a.palette.common.white,fontWeight:"bold"},children:"Roles"}),e.jsx(D,{sx:{backgroundColor:a.palette.primary.main,color:a.palette.common.white,fontWeight:"bold"},children:"Total Permissions Assigned"}),e.jsx(D,{sx:{backgroundColor:a.palette.primary.main,color:a.palette.common.white,fontWeight:"bold"},children:"Permissions Name"})]})}),e.jsx(fe,{children:t.map((i,o)=>{const f=x[o];return e.jsxs(J,{sx:{backgroundColor:o%2===0?a.palette.background.default:a.palette.grey[50],":hover":{backgroundColor:a.palette.grey[100],cursor:"pointer"}},children:[e.jsx(D,{sx:{display:"flex",alignItems:"center",border:"1px solid",borderColor:a.palette.grey[300]},children:e.jsx(r,{variant:"subtitle1",color:a.palette.text.primary,children:i==null?void 0:i.name})}),e.jsx(D,{sx:{border:"1px solid",borderColor:a.palette.grey[300]},children:i==null?void 0:i.permissions_count}),e.jsx(D,{sx:{border:"1px solid",borderColor:a.palette.grey[300]},children:(i==null?void 0:i.permissions)&&e.jsxs(e.Fragment,{children:[i==null?void 0:i.permissions.slice(0,f?i.permissions.length:3).map(d=>e.jsx(ue,{label:d.name,sx:{margin:.4},variant:"outlined",color:"primary"},d.uuid)),(i==null?void 0:i.permissions.length)>3&&e.jsx(z,{onClick:()=>h(o),sx:{marginLeft:1},children:f?e.jsx(ye,{size:16}):e.jsx(ve,{size:16})})]})})]},o)})})]})})})})}),e.jsx(n,{item:!0,xs:4,children:e.jsxs(v,{sx:{minHeight:280,paddingY:1},children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:.8},children:e.jsx(r,{variant:"h4",children:"Notifications"})}),e.jsx(F,{}),e.jsx(F,{}),e.jsx(F,{})]})})]})})},_e=()=>{const t=$(),a=M(b=>b.customization.selectedFiscalYear),[c,m]=l.useState(!1),[p,u]=l.useState([]),[x,j]=l.useState(!1),[h,i]=l.useState(!0),[o,y]=l.useState([]),f=async()=>{if(a){i(!0);const b=await R(),w=T.api+T.getStats,E={Authorization:`Bearer ${b}`,accept:"application/json","Content-Type":"application/json"};fetch(w,{method:"GET",headers:E}).then(g=>g.json()).then(g=>{g.success?y(g.data):S.warning(g.message)}).catch(g=>{S.warning(g.message)}).finally(()=>{i(!1)})}else return e.jsx(B,{})},d=()=>{j(!0);const b=localStorage.getItem("token"),w=`${T.auth}${T.roles}`,E={Authorization:`Bearer ${b}`,accept:"application/json","Content-Type":"application/json"};fetch(w,{method:"GET",headers:E}).then(g=>g.json()).then(g=>{g.success&&u(g.data),j(!1)}).catch(g=>{j(!1),setError(!0),S(g.message)})};return l.useEffect(()=>{d()},[]),l.useEffect(()=>{f()},[a]),e.jsx(W,{title:"Dashboard",children:e.jsx(n,{container:!0,spacing:I,sx:{margin:1},children:e.jsxs(n,{item:!0,xs:11.6,children:[e.jsxs(n,{container:!0,spacing:I,sx:{display:"flex",alignItems:"center"},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:h?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:t.palette.primary[800],padding:1,":hover":{backgroundColor:t.palette.primary[800]}},children:e.jsx(be,{size:"1.4rem",stroke:"1.8",color:"white"})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:t.palette.primary[800],children:o==null?void 0:o.users}),e.jsx(r,{variant:"subtitle1",color:t.palette.primary[800],sx:{marginLeft:.6},children:"Users"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total Users"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:h?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:"green",padding:1,":hover":{backgroundColor:"green"}},children:e.jsx(se,{size:"1.4rem",stroke:"1.8",color:"white"})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"green",children:o==null?void 0:o.roles}),e.jsx(r,{variant:"subtitle1",color:"green",sx:{marginLeft:.6},children:"Roles"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total Roles"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:h?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(z,{sx:{backgroundColor:"#8000ff",padding:1,":hover":{backgroundColor:"#8000ff"}},children:[e.jsx(ze,{size:"1.4rem",stroke:"1.8",style:{color:"#fff"}})," "]}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"#8000ff",children:o==null?void 0:o.permissions}),e.jsx(r,{variant:"subtitle1",color:"#8000ff",sx:{marginLeft:.6},children:"Permissions"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total Permissions"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:e.jsx(v,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:h?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:20})}):e.jsxs(P.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(z,{sx:{backgroundColor:"#cc5d02",padding:1,":hover":{backgroundColor:"#cc5d02"}},children:e.jsx(ne,{size:"1.4rem",stroke:"1.8",style:{color:"#fff"}})}),e.jsxs(s,{sx:{marginLeft:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(r,{variant:"h3",color:"#cc5d02",children:o==null?void 0:o.employees}),e.jsx(r,{variant:"subtitle1",color:"#cc5d02",sx:{marginLeft:.6},children:"Employees"})]}),e.jsx(r,{variant:"subtitle1",color:t.palette.text.primary,sx:{marginLeft:.4},children:"Total Employees"})]})]}),e.jsx(A,{size:"1.4rem",stroke:"1.8",color:"#ccc"})]})})})]}),e.jsx(n,{container:!0,spacing:I,marginY:2,sx:{minHeight:200},children:e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingY:2},children:e.jsx(s,{children:e.jsx(r,{variant:"h4",children:"Assigned Permission and Role"})})}),c?e.jsx(n,{container:!0,children:e.jsx(n,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:4},children:e.jsx(k,{size:20})})}):e.jsx($e,{assigneperm:p})]})})]})})})},Qe=()=>{const t=M(m=>m.user.user),[a,c]=l.useState(["Employee"]);return l.useEffect(()=>{if(t&&t.roles){const m=t.roles.map(p=>p.name);c(m)}},[t]),a.includes("Admin")?e.jsx(U,{}):a.includes("Manager")?e.jsx(U,{}):a.includes("Super_Admin")?e.jsx(_e,{}):a.includes("Employee")?e.jsx(De,{}):e.jsx(U,{})};export{Qe as default};
